# YES THERE IS A REASON TO PUT THINGS IN ORDER
# THIS IS THE ORDER THINGS SHOW UP IN-GAME, IN THE ESTATE WINDOW
# The order in which they're listed in 97_mages is the order they show up in the privilege selection window
# For sanity's sake, please keep these two aligned
# Putting things in a separate file can screw things up and show your org behind your privs!
### Black Demense gets a pass because oh my god have you seen the acolyte file
# I'm very sorry that this splits up otherwise logical arrangements, such as the deepwoods rangers privs
# However, that priv specifically was ALSO showing up ahead of the organization

##########################
### BASE ORGANIZATIONS ###
##########################

estate_mages_organization_state = {
	icon = privilege_promote_maratha_nobility
	loyalty = 0.05
	land_share = 10
	is_valid = {
		NOT = { tag = A85 }
		NOT = { has_mages_special_organization_privilege = yes }
	}
	can_select = { can_pay_for_organization_swap = { estate = mages } }
	can_revoke = {
		always = no
	}
	on_granted = {
		pay_for_organization_swap = { organization = state }
		hidden_effect = {
			if = {
				limit = { NOT = { is_year = 1445 } }
				take_estate_land_share_gigantic = { estate = estate_mages }
			}
		}
		scaling_with_influence_privilege_tooltip = {
			estate_privilege = estate_mages_organization_state
		}
	}

	influence_scaled_conditional_modifier = {
		trigger = {
			NOT = {
				estate_loyalty = {
					estate = estate_mages
					loyalty = 30
				}
			}
		}
		modifier = {
			mages_estate_experience_mod = -0.2
		}
	}
	influence_scaled_conditional_modifier = {	#Modifier that are applied if the specified conditions are true. At 100% Influence you gain 100% of the modifier.
		trigger = {
			estate_loyalty = {
				estate = estate_mages
				loyalty = 30
			}
			NOT = {
				estate_loyalty = {
					estate = estate_mages
					loyalty = 60
				}
			}
		}
		modifier = {
			mages_estate_experience_mod = 0.1
		}
	}
	influence_scaled_conditional_modifier = {	#Modifier that are applied if the specified conditions are true. At 100% Influence you gain 100% of the modifier.
		trigger = {
			estate_loyalty = {
				estate = estate_mages
				loyalty = 60
			}
		}
		modifier = {
			mages_estate_experience_mod = 0.2
		}
	}

	conditional_modifier = {
		trigger = {
			has_country_flag = J33_mage_only_flag
		}
		modifier = {
			mages_loyalty_modifier = 0.1
			mages_influence_modifier = 0.1
		}
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 10
			current_age = age_of_absolutism
		}
		modifier = {
			factor = 0
			has_estate_privilege = estate_mages_organization_magisterium
		}
	}
}
estate_mages_organization_guilds = {
	icon = privilege_promote_maratha_nobility
	max_absolutism = -10
	conditional_modifier = {
		trigger = {
			has_absolutism_reduction_for_estate_privileges = yes
			NOT = { has_country_flag = remove_absolutism_from_guilds }
		}
		modifier = { max_absolutism = 2 }
	}
	influence = 0.05
	is_valid = {
		NOT = { tag = A85 }
		NOT = { has_mages_special_organization_privilege = yes }
	}
	can_select = { can_pay_for_organization_swap = { estate = mages } }
	can_revoke = {
		always = no
	}
	on_granted = {
		pay_for_organization_swap = { organization = guilds }
		hidden_effect = {
			if = {
				limit = { NOT = { is_year = 1445 } }
				take_estate_land_share_gigantic = { estate = estate_mages }
			}
		}
		if = {
			limit = { has_country_flag = depowered_the_magisterium }
			custom_tooltip = guilds_mage_org_extra_effect_tt
		}
		scaling_with_influence_privilege_tooltip = {
			estate_privilege = estate_mages_organization_guilds
		}
	}
	conditional_modifier = {
		trigger = { has_country_flag = depowered_the_magisterium }
		modifier = {
			mages_influence_modifier = 0.05
			mages_loyalty_modifier = 0.05
		}
	}
	conditional_modifier = {
		trigger = { has_country_flag = remove_absolutism_from_guilds }
		modifier = { max_absolutism = 10 }
	}

	influence_scaled_conditional_modifier = {
		trigger = {
			NOT = {
				estate_loyalty = {
					estate = estate_mages
					loyalty = 30
				}
			}
		}
		modifier = {
			mages_ruler_experience_mod = -0.2
		}
	}
	influence_scaled_conditional_modifier = {	#Modifier that are applied if the specified conditions are true. At 100% Influence you gain 100% of the modifier.
		trigger = {
			estate_loyalty = {
				estate = estate_mages
				loyalty = 30
			}
			NOT = {
				estate_loyalty = {
					estate = estate_mages
					loyalty = 60
				}
			}
		}
		modifier = {
			mages_ruler_experience_mod = 0.1
		}
	}
	influence_scaled_conditional_modifier = {	#Modifier that are applied if the specified conditions are true. At 100% Influence you gain 100% of the modifier.
		trigger = {
			estate_loyalty = {
				estate = estate_mages
				loyalty = 60
			}
		}
		modifier = {
			mages_ruler_experience_mod = 0.2
		}
	}
	ai_will_do = {
		factor = 0
	}
}
estate_mages_organization_religious = {
	icon = privilege_promote_maratha_nobility
	max_absolutism = -5
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 1 } }
	influence = 0.1
	land_share = 5
	is_valid = {
		NOT = { tag = A85 }
		OR = {
			has_estate = estate_church
			religion_group = centaur_religion
			religion_group = raheni
		}
		NOT = { has_mages_special_organization_privilege = yes }
	}
	can_select = {
		if = {
			limit = {
				religion_group = centaur_religion
				NOT = { has_estate = estate_church }
			}
			OR = {
				religious_school = {
					group = centaur_religion
					school = malukhuga_school
				}
				has_country_modifier = malukhuga_scholar_modifier
			}
		}
		can_pay_for_organization_swap = { estate = mages }
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		pay_for_organization_swap = { organization = religious }
		hidden_effect = {
			if = {
				limit = { NOT = { is_year = 1445 } }
				take_estate_land_share_massive = { estate = estate_mages }
			}
		}
		scaling_with_influence_privilege_tooltip = {
			estate_privilege = estate_mages_organization_religious
		}
	}
	on_invalid = {
		custom_tooltip = estate_mages_religious_invalid_tooltip
		hidden_effect = {
			if = {
				limit = { NOT = { has_mages_organization_privilege = yes } }
				set_estate_privilege = estate_mages_organization_state
			}
		}
	}
	conditional_modifier = {
		trigger = { NOT = { religious_unity = 0.5 } }
		modifier = {
			mages_loyalty_modifier = -0.05
			church_influence_modifier = -0.05
		}
		is_bad = yes
	}
	conditional_modifier = {
		trigger = { religious_unity = 0.5 }
		modifier = {
			mages_loyalty_modifier = 0.05
			church_influence_modifier = 0.05
		}
	}

	influence_scaled_conditional_modifier = {
		trigger = {
			NOT = {
				estate_loyalty = {
					estate = estate_mages
					loyalty = 30
				}
			}
		}
		modifier = {
			global_missionary_strength = -0.04

			papal_influence = -2
			monthly_fervor_increase = -0.5
			church_power_modifier = -0.2
			monthly_piety_accelerator = -0.002
			yearly_karma_decay = -0.2
			yearly_doom_reduction = -2
			yearly_authority = -0.3
			yearly_patriarch_authority = -0.01
			yearly_harmony = -0.5

			mages_monthly_experience = -0.5
		}
	}
	influence_scaled_conditional_modifier = {	#Modifier that are applied if the specified conditions are true. At 100% Influence you gain 100% of the modifier.
		trigger = {
			estate_loyalty = {
				estate = estate_mages
				loyalty = 30
			}
			NOT = {
				estate_loyalty = {
					estate = estate_mages
					loyalty = 60
				}
			}
		}
		modifier = {
			global_missionary_strength = 0.02

			papal_influence = 1
			monthly_fervor_increase = 0.25
			church_power_modifier = 0.1
			monthly_piety_accelerator = 0.001 #inaccessible unless you're at 100%
			yearly_karma_decay = 0.1
			yearly_doom_reduction = 1
			yearly_authority = 0.15
			yearly_patriarch_authority = 0.005
			yearly_harmony = 0.25

			mages_monthly_experience = 0.25
		}
	}
	influence_scaled_conditional_modifier = {	#Modifier that are applied if the specified conditions are true. At 100% Influence you gain 100% of the modifier.
		trigger = {
			estate_loyalty = {
				estate = estate_mages
				loyalty = 60
			}
		}
		modifier = {
			global_missionary_strength = 0.04

			papal_influence = 2
			monthly_fervor_increase = 0.5
			church_power_modifier = 0.2
			monthly_piety_accelerator = 0.002 #inaccessible unless you're at 50% influence
			yearly_karma_decay = 0.2
			yearly_doom_reduction = 2
			yearly_authority = 0.3
			yearly_patriarch_authority = 0.01
			yearly_harmony = 0.5

			mages_monthly_experience = 0.5
		}
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 0.8
			OR = {
				NOT = { crown_land_share = 40 }
				AND = {
					is_absolutism_active = yes
					NOT = { crown_land_share = 60 }
				}
			}
		}
		modifier = {
			factor = 0.8
			OR = {
				NOT = { crown_land_share = 30 }
				AND = {
					is_absolutism_active = yes
					NOT = { crown_land_share = 50 }
				}
			}
		}
		modifier = {
			factor = 0.8
			is_absolutism_active = yes
		}
	}
}

##############################
### REGIONAL ORGANIZATIONS ###
##############################

estate_mages_organization_magisterium = {
	icon = privilege_promote_maratha_nobility
	max_absolutism = 0
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 2 } }
	land_share = 5
	influence = 0.15
	is_valid = {
		OR = {
			AND = {
				tag = Z01 #Empire of Anbennar
				is_revolutionary = no #Blackpowder Anbennar
			}
			AND = {  #Magisterium exists and can form a relationship with you
				knows_country = A85
				A85 = { knows_country = ROOT }
			}
		}
		NOT = { has_mages_special_organization_privilege = yes }
	}
	can_select = {
		OR = {
			is_part_of_hre = yes
			tag = A85 #Magisterium
			reverse_has_opinion = { who = A85 value = 150 }
		}
		can_pay_for_organization_swap = { estate = mages }
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		pay_for_organization_swap = { organization = magisterium }
		if = {
			limit = { has_estate_privilege = estate_mages_organization_magisterium }
			custom_tooltip = estate_mages_magisterium_relations_tooltip
		}
		hidden_effect = {
			if = {
				limit = { NOT = { is_year = 1445 } }
				take_estate_land_share_massive = { estate = estate_mages }
			}
		}
		scaling_with_influence_privilege_tooltip = {
			estate_privilege = estate_mages_organization_magisterium
		}
	}

	influence_scaled_conditional_modifier = {
		trigger = {
			NOT = {
				estate_loyalty = {
					estate = estate_mages
					loyalty = 30
				}
			}
		}
		modifier = {
			mages_estate_experience_mod = -0.25
			mages_ruler_experience_mod = -0.25
			necromancy_experience_mod = 0.25
		}
	}
	influence_scaled_conditional_modifier = {	#Modifier that are applied if the specified conditions are true. At 100% Influence you gain 100% of the modifier.
		trigger = {
			estate_loyalty = {
				estate = estate_mages
				loyalty = 30
			}
			NOT = {
				estate_loyalty = {
					estate = estate_mages
					loyalty = 60
				}
			}
		}
		modifier = {
			mages_estate_experience_mod = 0.1
			mages_ruler_experience_mod = 0.1
			necromancy_experience_mod = -0.1
		}
	}
	influence_scaled_conditional_modifier = {	#Modifier that are applied if the specified conditions are true. At 100% Influence you gain 100% of the modifier.
		trigger = {
			estate_loyalty = {
				estate = estate_mages
				loyalty = 60
			}
		}
		modifier = {
			mages_ruler_experience_mod = 0.25
			mages_estate_experience_mod = 0.25
			necromancy_experience_mod = -0.25
		}
	}
	penalties = {
	}
	benefits = {
		imperial_authority = 0.05
	}
	conditional_modifier = {
		trigger = {
			exists = A85
			NOT = { is_or_was_tag = { tag = A85 } }
			NOT = {
				reverse_has_opinion = {
					who = A85 #Magisterium
					value = 0
				}
			}
		}
		modifier = {
			mages_loyalty_modifier = -0.05
		}
	}
	conditional_modifier = {
		trigger = {
			exists = A85
			NOT = { is_or_was_tag = { tag = A85 } }
			reverse_has_opinion = {
				who = A85 #Magisterium
				value = 100
			}
		}
		modifier = {
			mages_loyalty_modifier = 0.05
		}
	}
	conditional_modifier = {
		trigger = {
			OR = {
				is_or_was_tag = { tag = A85 } #Magisterium
				is_or_was_tag = { tag = Z01 } #Empire of Anbennar
			}
		}
		modifier = {
			mages_loyalty_modifier = 0.1
		}
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 100
			tag = A85
		}
		modifier = {
			factor = 10
			is_part_of_hre = yes
		}
	}
}

estate_mages_organization_magi_clans = { #Sun Cult/Jadd new estate org (also for cranthanor)
	icon = privilege_promote_maratha_nobility
	max_absolutism = -10
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 1 } }
	influence = 0.25
	land_share = 5
	is_valid = {
		OR = {
			religion_group = bulwari
			has_country_flag = updating_isolationism_window
			tag = U17
		}
		NOT = { has_mages_special_organization_privilege = yes }
	}
	can_select = { can_pay_for_organization_swap = { estate = mages } }
	can_revoke = {
		always = no
	}
	on_granted = {
		pay_for_organization_swap = { organization = magi_clans }
		hidden_effect = {
			if = {
				limit = { NOT = { is_year = 1445 } }
				take_estate_land_share_massive = { estate = estate_mages }
			}
		}
		custom_tooltip = magi_clans_mage_loyalty_tt
		custom_tooltip = magi_clans_church_loyalty_tt
		custom_tooltip = magi_clans_jexisian_tt
	}
	on_revoked = {
		custom_tooltip = magi_clans_mage_loyalty_tt
		custom_tooltip = magi_clans_church_loyalty_tt
		custom_tooltip = magi_clans_jexisian_tt
	}
	on_invalid = {
		custom_tooltip = estate_mages_jaherian_invalid_tooltip
		hidden_effect = {
			if = {
				limit = { NOT = { has_mages_organization_privilege = yes } }
				set_estate_privilege = estate_mages_organization_state
			}
		}
	}
	penalties = {
	}
	benefits = {
		max_estate_spell_levels = 1
		mages_estate_experience_mod = 0.1
	}
	conditional_modifier = {
		trigger = {
			has_country_flag = vacyntassy_jaherian_statute_flag
		}
		modifier = {
			diplomatic_reputation = 1
			all_estate_loyalty_equilibrium = 0.05
		}
	}
	conditional_modifier = {	
		trigger = {
			NOT = {
				estate_loyalty = {
					estate = estate_mages
					loyalty = 30
				}
			}
			NOT = {
				has_estate_privilege = estate_mages_jexisian_regulations
			}
		}
		modifier = {
			global_trade_power = -0.05
		}
	}
	conditional_modifier = {	
		trigger = {
			estate_loyalty = {
				estate = estate_mages
				loyalty = 30
			}
			NOT = {
				estate_loyalty = {
					estate = estate_mages
					loyalty = 60
				}
			}
			NOT = {
				has_estate_privilege = estate_mages_jexisian_regulations
			}
		}
		modifier = {
			global_trade_power = 0.025
		}
	}
	conditional_modifier = {	
		trigger = {
			estate_loyalty = {
				estate = estate_mages
				loyalty = 60
			}
			NOT = {
				has_estate_privilege = estate_mages_jexisian_regulations
			}
		}
		modifier = {
			global_trade_power = 0.05
		}
	}
	conditional_modifier = {	
		trigger = {
			NOT = {
				estate_loyalty = {
					estate = estate_church
					loyalty = 30
				}
			}
			NOT = {
				has_estate_privilege = estate_mages_jexisian_regulations
			}
		}
		modifier = {
			mages_monthly_experience = -0.5
		}
	}
	conditional_modifier = {	
		trigger = {
			estate_loyalty = {
				estate = estate_church
				loyalty = 30
			}
			NOT = {
				estate_loyalty = {
					estate = estate_church
					loyalty = 60
				}
			}
			NOT = {
				has_estate_privilege = estate_mages_jexisian_regulations
			}
		}
		modifier = {
			mages_monthly_experience = 0.25
		}
	}
	conditional_modifier = {	
		trigger = {
			NOT = {
				has_estate_privilege = estate_mages_jexisian_regulations
			}
			estate_loyalty = {
				estate = estate_church
				loyalty = 60
			}
		}
		modifier = {
			mages_monthly_experience = 0.5
		}
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 0.8
			OR = {
				NOT = { crown_land_share = 40 }
				AND = {
					is_absolutism_active = yes
					NOT = { crown_land_share = 60 }
				}
			}
		}
		modifier = {
			factor = 0.8
			OR = {
				NOT = { crown_land_share = 30 }
				AND = {
					is_absolutism_active = yes
					NOT = { crown_land_share = 50 }
				}
			}
		}
		modifier = {
			factor = 0.8
			is_absolutism_active = yes
		}
	}
}

estate_mages_organization_onyxguard = { #Lake Federation
	icon = privilege_onyxguard
	max_absolutism = -5
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 1 } }
	loyalty = 0.1
	influence = 0.05

	is_valid = {
		has_estate_privilege = estate_mages_organization_onyxguard
	}
	can_select = {
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		custom_tooltip = onyxguard_no_infamy_siege
		clear_mages_organization_effect = yes
	}
	penalties = {
		necromancy_experience_mod = -0.5
		enchantment_experience_mod = -0.5
	}
	conditional_modifier = {
		trigger = {
			has_country_flag = J33_mage_only_flag
		}
		modifier = {
			mages_loyalty_modifier = 0.05
			mages_influence_modifier = 0.05
			artificers_loyalty_modifier = 0.05
			artificers_influence_modifier = 0.05
		}
	}
	ai_will_do = {
		factor = 5
	}
}

#############################
### SPECIAL ORGANIZATIONS ###
#############################

estate_mages_organization_covenant = { #Aelnar
	icon = privilege_promote_maratha_nobility
	max_absolutism = 5
	loyalty = 0.10
	influence = -0.10
	is_valid = { has_estate_privilege = estate_mages_organization_covenant }
	can_select = {
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		clear_mages_organization_effect = yes
	}
	penalties = {
	}
	benefits = {
		yearly_absolutism = 0.1
	}
	ai_will_do = {
		factor = 5
	}
}

estate_mages_organization_elissa = { #Aelnar
	icon = privilege_promote_maratha_nobility
	max_absolutism = 10
	loyalty = 0.15
	influence = 0.15
	is_valid = { has_estate_privilege = estate_mages_organization_elissa }
	can_select = {
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		clear_mages_organization_effect = yes
	}
	penalties = {
	}
	benefits = {
		yearly_absolutism = 0.1
	}
	ai_will_do = {
		factor = 5
	}
}

estate_mages_organization_runesmiths = { # Verkal Ozovar
	icon = privilege_promote_maratha_nobility
	loyalty = 0.1
	influence = 0.15
	is_valid = { has_estate_privilege = estate_mages_organization_runesmiths }
	can_revoke = {
		always = no
	}
	on_granted = {
		clear_mages_organization_effect = yes
	}
	penalties = {
		idea_cost = 0.05
		build_cost = -0.1
	}
	benefits = {
	}
	ai_will_do = {
		factor = 1
	}
}

estate_mages_organization_constabularies = { #Chaingrasper
	icon = privilege_promote_maratha_nobility
	max_absolutism = 0
	loyalty = 0.1
	influence = 0.2
	is_valid = { has_country_flag = chaingrasper_can_get_constabularies }
	can_revoke = {
		always = no
	}
	on_granted = {
		custom_tooltip = chaingrasper_mages_constabularies_tt
		clear_mages_organization_effect = yes
	}
	penalties = {
		global_tax_modifier = -0.2
	}
	benefits = {
		stability_cost_modifier = -0.25
		global_spy_defence = 0.25
	}
	ai_will_do = {
		factor = 1
	}
}

estate_mages_organization_lihos_maidens = { # Yinquan
	icon = privilege_promote_maratha_nobility
	loyalty = 0.1
	influence = 0.2
	is_valid = { has_estate_privilege = estate_mages_organization_lihos_maidens }
	can_revoke = {
		always = no
	}
	on_granted = {
		clear_mages_organization_effect = yes
	}
	benefits = {
		global_missionary_strength = 0.02
		church_loyalty_modifier = 0.05
		church_influence_modifier = 0.05
		church_power_modifier = 0.5
	}
	ai_will_do = {
		factor = 1
	}
}

estate_mages_organization_orda_aldresia = { #Orda Aldresia
	icon = privilege_promote_maratha_nobility
	max_absolutism = -10
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 2 } }
	loyalty = 0.10
	land_share = 10
	influence = 0.2
	is_valid = { tag = A77 }
	can_revoke = {
		always = no
	}
	benefits = {
		innovativeness_gain = 1
		assault_fort_ability = 0.5
		may_recruit_female_generals = yes
	}
	ai_will_do = {
		factor = 5
	}
}

estate_mages_organization_bardic_college = { #Seinathil
	icon = privilege_promote_maratha_nobility
	max_absolutism = -25
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 5 } }
	loyalty = 0.10
	influence = 0.10
	is_valid = { has_estate_privilege = estate_mages_organization_bardic_college }
	can_select = {
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		clear_mages_organization_effect = yes
	}
	penalties = {
	}
	benefits = {
	prestige = 0.5
	stability_cost_modifier = -0.10
	}
	ai_will_do = {
		factor = 5
	}
}

estate_mages_organization_ice_smiths = { #Krakdhumvror
	icon = privilege_promote_maratha_nobility
	loyalty = 0.1
	influence = 0.2
	land_share = 10
	is_valid = { tag = I02 }
	can_select = {
		always = yes
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		clear_mages_organization_effect = yes
	}
	penalties = {
		production_efficiency = -0.05
	}
	benefits = {
	}
	ai_will_do = {
		factor = 1
	}
}

estate_mages_organization_science_mages = { #Orlghelovar
	icon = privilege_seek_support_of_brahmins
	max_absolutism = 0
	loyalty = -0.05
	influence = 0.1
	is_valid = { has_estate_privilege = estate_mages_organization_science_mages }
	can_revoke = {
		always = no
	}
	on_granted = {
		custom_tooltip = orlghelovar_science_mages_tt
		hidden_effect = {
			mission_reward_artifice_points_10 = yes
			mission_reward_artifice_points_2 = yes
		}
		clear_mages_organization_effect = yes
	}
	penalties = {
	}
	benefits = {
		innovativeness_gain = 0.2
	}
	ai_will_do = { factor = 1 }
}

estate_mages_organization_proffesional_mihipha = { #Vyzemby
	icon = privilege_promote_maratha_nobility
	loyalty = 0.1
	influence = 0.1
	is_valid = { has_estate_privilege = estate_mages_organization_proffesional_mihipha }
	can_revoke = { always = no }

	benefits = {
		all_power_cost = -0.025
	}

	ai_will_do = { factor = 0 }
}

estate_mages_organization_giberd_beacon_of_harmony = { #Giberd
	icon = privilege_promote_maratha_nobility
	max_absolutism = 0
	loyalty = 0.1
	influence = 0.1
	is_valid = { has_estate_privilege = estate_mages_organization_giberd_beacon_of_harmony }
	can_revoke = {
		always = no
	}
	on_granted = {
		clear_mages_organization_effect = yes
	}
	penalties = {
	}
	benefits = {
		allowed_rajput_fraction = 0.10
		tolerance_heathen = 1
		tolerance_heretic = 1
		tolerance_of_heretics_capacity = 1
		tolerance_of_heathens_capacity = 1
		mages_monthly_experience = 1
	}
	ai_will_do = {
		factor = 1
	}
}

estate_mages_organization_rule_of_warlocks = { #Rakkaz
	icon = privilege_promote_maratha_nobility
	loyalty = 0.1
	influence = 0.2
	is_valid = { has_estate_privilege = estate_mages_organization_rule_of_warlocks }
	can_revoke = {
		always = no
	}
	on_granted = {
		if = {
			limit = { has_reform = magocracy_reform }
			custom_tooltip = rakkaz_warlock_nice
		}
		else = {
			custom_tooltip = rakkaz_warlock_bad
		}	
		custom_tooltip = rakkaz_rule_of_warlocks_tooltip
		hidden_effect = { country_event = { id = flavour_rakkaz.6 } }
		custom_tooltip = " "
		complex_dynamic_effect = {
			first_custom_tooltip = rakkaz_has_religious_ideas
			first_limit = "
				full_idea_group = religious_ideas
			"
			first_effect = "
				custom_tooltip = rakkaz_monthly_admin_tooltip
			"
		}
		complex_dynamic_effect = {
			first_custom_tooltip = country_infamy_witch_king
			first_limit = "
				estate_has_infamy_witch_king = yes
			"
			first_effect = "
				custom_tooltip = rakkaz_witch_consortium_tt
			"
		}
	}
	penalties = {
		ae_impact = 0.1
	}
	benefits = {
		cb_on_religious_enemies = yes
		necromancy_experience_mod = 0.15
		evocation_experience_mod = 0.15
	}
	conditional_modifier = {
		trigger = {
			full_idea_group = religious_ideas
		}
		modifier = {
			country_admin_power = 1
		}
	}
	conditional_modifier = {
		trigger = {
			estate_has_infamy_witch_king = yes
		}
		modifier = {
			mages_monthly_experience = 0.5
		}
	}
	ai_will_do = {
		factor = 10
	}
}

estate_mages_organization_aviaries = { #Chaqway
	icon = privilege_promote_maratha_nobility
	loyalty = 0.1
	influence = 0.2
	is_valid = { has_estate_privilege = estate_mages_organization_aviaries }
	can_revoke = {
		always = no
	}
	on_granted = {
		clear_mages_organization_effect = yes
	}
	benefits = {
		state_maintenance_modifier = -0.25
	}
	ai_will_do = {
		factor = 1
	}
}

estate_mages_organization_hydromancers_guild = { #Karshyr
	icon = privilege_cast_spell
	loyalty = 0.1
	influence = 0.1
	can_select = {
		can_pay_for_organization_swap = { estate = mages }
	}
	is_valid = {
		is_or_was_tag = { tag = S15 }
		mission_completed = S15_strengthen_the_hydromancer_guild
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		pay_for_organization_swap = { organization = hydromancers_guild }
	}
	benefits = {
		production_efficiency = 0.1
	}
	ai_will_do = {
		factor = 10
	}
}

##########################
### REGULAR PRIVILEGES ###
##########################

estate_mages_magocratic_administration = {
	icon = privilege_grant_autonomy
	loyalty = 0.05
	influence = 0.05
	max_absolutism = -5
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 1 } }
	land_share = 5
	is_valid = {
		NOT = { religion = gods_of_the_taychend religion = oren_nayiru }
	}
	benefits = { governing_capacity = 100 }
	penalties = { nobles_loyalty_modifier = -0.05 uppercastes_loyalty_modifier = -0.05 }
	
	ai_will_do = {
		factor = 5

		modifier = {
			factor = 10
			OR = {
				crown_land_share = 50
				governing_capacity_percentage = 0.8
				has_estate_privilege = estate_mages_magocratic_administration
			}
		}
	}
}

estate_mages_seek_magical_advice = {
	icon = privilege_missionary
	loyalty = 0.0
	influence = 0.05
	max_absolutism = -5
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 1 } }
	is_valid = { NOT = { tag = I02 } }

	conditional_modifier = { #Deranne
		trigger = { mission_completed = deranne_traditions_of_old  }
		modifier = { 
			stability_cost_modifier = -0.05
		}
	}

	on_granted = {
		enable_estate_action = { estate_action = RECRUIT_COURT_MAGE }
	}
	on_revoked = {
		disable_estate_action = { estate_action = RECRUIT_COURT_MAGE }
	}
	on_invalid = {
		disable_estate_action = { estate_action = RECRUIT_COURT_MAGE }
	}

	ai_will_do = { factor = 0 }
}

estate_mages_reduced_research_regulations = {
	icon = privilege_land_rights
	influence = 0.05
	max_absolutism = -10
	conditional_modifier = {
		trigger = {
			has_absolutism_reduction_for_estate_privileges = yes
			NOT = { has_country_flag = remove_absolutism_from_regulations hre_reform_passed = anbennar_imperial_wizards }
		}
		modifier = { max_absolutism = 2 }
	}
	is_valid = {
		NOT = { tag = I02 }
		NOT = { has_country_flag = vacyntassi_jaherian_statute_flag }
	}
	on_granted = {
		custom_tooltip = tooltip_estate_mages_reduced_research_regulations
	}
	conditional_modifier = {
		trigger = { NOT = { has_country_flag = remove_dip_from_regulations } }
		modifier = { diplomatic_reputation = -1 }
		is_bad = yes
	}
	conditional_modifier = {
		trigger = { has_country_flag = remove_absolutism_from_regulations }
		modifier = { max_absolutism = 10 }
	}
	conditional_modifier = {
		trigger = { mission_completed = F71_a_silent_strike }
		modifier = { governing_capacity_modifier = 0.05 }
	}
	conditional_modifier = { #eoa imperial wizards
		trigger = {
			hre_reform_passed = anbennar_imperial_wizards
			OR = { is_part_of_hre = yes tag = Z01 is_subject_of = Z01 }
		}
		modifier = { max_absolutism = 10 }
	}
	conditional_modifier = {
		trigger = { has_country_flag = L68_sharknado }
		modifier = {
			global_naval_barrage_cost = -0.50
			reduced_liberty_desire = 25
		}
	}
	benefits = {
	}
	ai_will_do = {
		factor = 5
		modifier = {	#witch kings baby
			factor = 3
			capital_scope = { superregion = escann_superregion }
			current_age = age_of_absolutism
		}
		modifier = {	#witch kings are evil baby
			factor = 3
			ruler_is_witch_king = yes
		}
		modifier = {
			factor = 0.75
			NOT = { diplomatic_reputation = 1 }	#dont want to take this if you have low dip rep anyway
		}
		modifier = {
			factor = 1.5
			ruler_is_powerful_mage = yes
		}
		modifier = {
			factor = 2
			OR = {
				ruler_has_personality = naive_personality
				ruler_has_personality = free_thinker_personality
				ruler_has_personality = zealot_personality
			}
		}
		modifier = {
			factor = 0.75
			OR = {
				ruler_has_personality = careful_personality
				ruler_has_personality = just_personality
				ruler_has_personality = righteous_personality
			}
		}
		modifier = {
			factor = 0.5
			has_estate_privilege = estate_mages_organization_magisterium
		}
		modifier = {
			factor = 0
			OR = {
				has_government_attribute = is_raja
				is_emperor_of_china = yes
			}
		}
	}
}

estate_mages_development_of_mage_towers = {
	icon = privilege_temple_complex
	loyalty = 0.05
	influence = 0.05
	max_absolutism = -5
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 1 } }
	is_valid = { NOT = { tag = I02 } }

	on_granted = {
		custom_tooltip = estate_mages_development_of_mage_towers_gt
		if = {
			limit = { NOT = { has_government_attribute = caretakers_of_mage_towers_upgrade  } }
			tooltip = {
				add_province_modifier = {
					name = estate_mages_development_of_mage_towers_mod
					duration = -1
				}
			}
		}
		else = {
			tooltip = {
				add_province_modifier = {
					name = estate_mages_development_of_mage_towers_improved_mod
					duration = -1
				}
			}
		}
		
	}
	on_revoked = {
		custom_tooltip = estate_mages_development_of_mage_towers_rt
	}
	on_granted_province = {
		if = {
				limit = { has_building = mage_tower }
			if = {
				limit = { owner = { NOT = { has_government_attribute = caretakers_of_mage_towers_upgrade  } } }
				add_province_modifier = {
					name = estate_mages_development_of_mage_towers_mod
					duration = -1
				}
			}
			else = {
				add_province_modifier = {
					name = estate_mages_development_of_mage_towers_improved_mod
					duration = -1
				}
			}
		}
	}
	on_revoked_province = {
		remove_province_modifier = estate_mages_development_of_mage_towers_mod
		remove_province_modifier = estate_mages_development_of_mage_towers_improved_mod
	}
	on_invalid_province = {
		remove_province_modifier = estate_mages_development_of_mage_towers_mod
		remove_province_modifier = estate_mages_development_of_mage_towers_improved_mod
	}

	mechanics = {
		no_estate_crownland_loss_from_developing
	}

	ai_will_do = {
		factor = 100
	}
}

estate_mages_land_grant_academies = {
	icon = estate_eunuchs_land_rights_privilege
	influence = 0.05
	max_absolutism = -5
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 1 } }
	is_valid = { NOT = { tag = I02 } }
	land_share = 10

	modifier_by_land_ownership = {
		mages_ruler_experience_mod = 0.5
		mages_estate_experience_mod = 0.5
	}

	mechanics = {
		exempt_from_seize_land
	}

	on_granted = { scaling_with_land_share_privilege_tooltip = { estate_privilege = estate_mages_land_grant_academies } }

	on_revoked = { scaling_with_land_share_privilege_tooltip = { estate_privilege = estate_mages_land_grant_academies } }

	ai_will_do = { factor = 0 }
}

estate_mages_puppet_of_corrupt_mages = {
	icon = privilege_cast_spell
	loyalty = 0.2
	max_absolutism = -20
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 4 } }

	is_valid = { has_estate_privilege = estate_mages_puppet_of_corrupt_mages } #invisible
	can_select = { always = no }
	can_revoke = {
		OR = {
			estate_has_infamy_suspicious_or_better = yes
			ruler_is_witch_king = yes
		}
		OR = {
			custom_trigger_tooltip = {
				tooltip = is_magocracy_tt
				has_government_attribute = is_magocracy
			}
			NOT = { estate_influence = { estate = estate_mages influence = 60 } }
		}
	}
	on_granted = {
		custom_tooltip = estate_mages_puppet_of_corrupt_mages_tt
		tooltip = { add_country_modifier = { name = estate_mages_puppet_of_corrupt_mages_no_witch_king duration = -1 } }
	}
	on_revoked = {
		add_country_modifier = { name = estate_mages_puppet_of_corrupt_mages_consequence duration = 3650 }

		custom_tooltip = estate_mages_puppet_of_corrupt_mages_tt
		tooltip = { add_country_modifier = { name = estate_mages_puppet_of_corrupt_mages_no_witch_king duration = -1 } }
	}
	conditional_modifier = {
		trigger = { ruler_is_not_witch_king = yes }
		modifier = {
			max_absolutism = -20
			diplomatic_reputation = -2
			
			legitimacy = -1
			devotion = -1
			republican_tradition = -0.2
			horde_unity = -1
		}
		is_bad = yes
	}

	penalties = {
		monarch_admin_power = -1
		monarch_diplomatic_power = -1
		monarch_military_power = -1
		artificers_capacity = -20
	}

	ai_will_do = {
		factor = 0
	}
}

######################
### AGE PRIVILEGES ###
######################

estate_mages_learn_from_elven_elders = {
	icon = estate_eunuchs_royal_intrigue_keepers_privilege
	influence = 0.05

	is_valid = { NOT = { tag = I02 } current_age = age_of_discovery } #age of greentide
	can_select = {
		current_age = age_of_discovery
		NOT = { has_estate_privilege = estate_mages_monstrous_regiment }
		OR = {
			has_country_modifier = elven_administration
			any_ally = {
				has_country_modifier = elven_administration
			}
			any_subject_country = {
				has_country_modifier = elven_administration
			}
			overlord = {
				has_country_modifier = elven_administration
			}
		}
	}
	
	benefits = {
		global_institution_spread = 0.1
		mages_estate_experience_mod = 0.05
	}
	ai_will_do = {
		factor = 100
	}
}

estate_mages_monstrous_regiment = {
	icon = privilege_macuahuitl
	influence = 0.05

	is_valid = { NOT = { tag = I02 } current_age = age_of_discovery } #age of greentide
	can_select = {
		current_age = age_of_discovery
		NOT = { has_estate_privilege = estate_mages_learn_from_elven_elders }
		OR = {
			AND = {
				has_country_modifier = monstrous_nation
				custom_trigger_tooltip = {
					tooltip = annexed_non_monstrous
					has_country_flag = annexed_non_monstrous
				}
			}
			AND = {
				NOT = { has_country_modifier = monstrous_nation }
				custom_trigger_tooltip = {
					tooltip = annexed_monstrous
					has_country_flag = annexed_monstrous
				}
			}
		}
	}
	
	benefits = {
		available_province_loot = 0.1
		mages_estate_experience_mod = 0.05
	}
	ai_will_do = {
		factor = 100
	}
}

estate_mages_aelantiri_magical_rediscovery = {
	icon = privilege_new_world_mission
	loyalty = 0.05
	influence = 0.05
	
	is_valid = { NOT = { tag = I02 } current_age = age_of_reformation } #age of unraveling
	can_select = {
		current_age = age_of_reformation
		NOT = { has_estate_privilege = estate_mages_thousand_flowers_bloom }
		OR = {
			capital_scope = {
				OR = {
					continent = north_america
					continent = south_america
				}
			}
			any_ally = { has_country_modifier = ruinborn_administration }
			colony = 1
		}
		years_of_income = 1
	}

	on_granted = { add_years_of_income = -1 }
	benefits = {
		idea_cost = -0.05
		mages_estate_experience_mod = 0.1
	}

	ai_will_do = {
		factor = 100
	}
}

estate_mages_thousand_flowers_bloom = {
	icon = privilege_tolerance_heretics
	loyalty = 0.05
	influence = 0.05
	
	is_valid = { NOT = { tag = I02 } current_age = age_of_reformation } #age of unraveling
	can_select = {
		current_age = age_of_reformation
		NOT = { has_estate_privilege = estate_mages_aelantiri_magical_rediscovery }
		custom_trigger_tooltip = {
			tooltip = changed_religion
			has_country_flag = changed_religion
		}
		is_force_converted = no
		years_of_income = 1
	}

	on_granted = { add_years_of_income = -1 }
	benefits = {
		global_heretic_missionary_strength = 0.005
		tolerance_heretic = 0.5
		mages_estate_experience_mod = 0.1
	}

	ai_will_do = {
		factor = 100
	}
}

estate_mages_empowerment_of_witch_kings = {
	icon = privilege_cast_spell
	loyalty = 0.05
	influence = 0.05
	max_absolutism = 10

	is_valid = { NOT = { tag = I02 } current_age = age_of_absolutism } #age of witch kings
	can_select = {
		current_age = age_of_absolutism
		NOT = { has_estate_privilege = estate_mages_laws_against_witch_kings }
		OR = {
			ruler_is_witch_king = yes
			absolutism = 80
		}
	}

	on_granted = { custom_tooltip = higher_chance_of_powerful_mage_tt }
	benefits = { mages_ruler_experience_mod = 0.15 }
	penalties = { diplomatic_reputation = -1 }

	ai_will_do = {
		factor = 100
	}
}

estate_mages_laws_against_witch_kings = {
	icon = privilege_prohibited_education
	loyalty = 0.05
	influence = -0.05
	max_absolutism = -10
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 2 } }

	is_valid = { NOT = { tag = I02 } current_age = age_of_absolutism } #age of witch kings
	can_select = {
		current_age = age_of_absolutism
		NOT = { has_estate_privilege = estate_mages_empowerment_of_witch_kings }
		ruler_is_not_witch_king = yes
		NOT = { absolutism = 80 }
	}
	
	benefits = {
		diplomatic_reputation = 1
		mages_estate_experience_mod = 0.15
	}
	
	ai_will_do = {
		factor = 100
	}
}

estate_mages_the_scientific_method = {
	icon = privilege_Artf_Research
	loyalty = -0.05
	max_absolutism = -5
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 1 } }

	is_valid = { NOT = { tag = I02 } current_age = age_of_revolutions } #age of artificers
	can_select = {
		current_age = age_of_revolutions
		NOT = { has_estate_privilege = estate_mages_magocratic_reactionism }
		is_in_mixed_mode = yes
		innovativeness = 80
	}

	benefits = {
		mages_estate_experience_mod = 0.2
		technology_cost = -0.025
	}

	ai_will_do = {
		factor = 100
	}
}

estate_mages_magocratic_reactionism = {
	icon = privilege_seek_support_of_clergy
	loyalty = 0.05
	influence = 0.05
	max_absolutism = -5
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 1 } }

	is_valid = { NOT = { tag = I02 } current_age = age_of_revolutions } #age of artificers
	can_select = {
		current_age = age_of_revolutions
		NOT = { has_estate_privilege = estate_mages_the_scientific_method }
		is_in_mage_mode = yes
		OR = {
			custom_trigger_tooltip = {
				tooltip = is_magocracy_tt
				has_government_attribute = is_magocracy
			}
			has_reform = magical_elite_reform
		}
	}

	benefits = { mages_mana_regen_mult = 0.1 }
	penalties = { yearly_innovativeness = -0.36 }

	on_granted = { hidden_effect = { update_mana_regen_vars = yes } }
	on_revoked = { hidden_effect = { update_mana_regen_vars = yes } }
	on_invalid = { hidden_effect = { update_mana_regen_vars = yes } }

	ai_will_do = {
		factor = 100
	}
}

##############################
### Magical Infrastructure ###
##############################
estate_mages_battlemage_academies = {
	icon = privilege_demand_more_troops
	max_absolutism = -5
	conditional_modifier = {
		trigger = {
			has_absolutism_reduction_for_estate_privileges = yes
			NOT = { has_country_flag = remove_absolutism_from_battlemages hre_reform_passed = anbennar_imperial_wizards }
		}
		modifier = { max_absolutism = 1 }
	}
	influence = 0.05
	land_share = 10
	is_valid = {
		NOT = { tag = I02 }
		NOT = { has_country_flag = no_battlemage_academies }
		OR = {
			has_country_flag = may_grant_battlemage_academies
			is_in_mage_mode = yes
		}
		NOT = { mission_completed = A33_binding_the_beast }
	}
	can_select = {
		OR = {
			custom_trigger_tooltip = {
				tooltip = may_grant_battlemage_academies
				has_country_flag = may_grant_battlemage_academies
			}
			AND = {
				is_in_mage_mode = yes
				at_least_magical_infrastructure_level_1 = yes
			}
		}
		custom_trigger_tooltip = {
			tooltip = not_enabled_war_wizards_another_way
			NOT = { has_enabled_estate_action = { estate_action = RECRUIT_WAR_WIZARD } }
		}
	}
	on_granted = {
		custom_tooltip = tooltip_estate_mages_battlemage_academies
		enable_estate_action = { estate_action = RECRUIT_WAR_WIZARD }
	}
	on_revoked = {
		disable_estate_action = { estate_action = RECRUIT_WAR_WIZARD }
	}
	on_invalid = {
		disable_estate_action = { estate_action = RECRUIT_WAR_WIZARD }
	}
	conditional_modifier = {
		trigger = { NOT = { has_country_flag = remove_decay_from_battlemages } }
		modifier = { army_tradition_decay = 0.01 }
		is_bad = yes
	}
	conditional_modifier = {
		trigger = { has_country_flag = remove_absolutism_from_battlemages }
		modifier = { max_absolutism = 5 }
	}
	conditional_modifier = {
		trigger = { has_country_flag = remove_influence_from_battlemages }
		modifier = {
			mages_influence_modifier = -0.05
			mages_loyalty_modifier = 0.05
		}
	}
	conditional_modifier = {
		trigger = { mission_completed = F71_a_silent_strike }
		modifier = { governing_capacity_modifier = 0.05 }
	}
	conditional_modifier = { #eoa imperial wizards
		trigger = {
			hre_reform_passed = anbennar_imperial_wizards
			OR = { is_part_of_hre = yes tag = Z01 is_subject_of = Z01 }
		}
		modifier = { max_absolutism = 5 }
	}
	conditional_modifier = {
		trigger = { mission_completed = gor_vazumbrog_bonded_by_firepower }
		modifier = {
			mages_influence_modifier = 0.05
			mages_loyalty_modifier = 0.1
			max_absolutism = 5
			army_tradition_decay = -0.01
		}
	}
	ai_will_do = {
		factor = 6
		modifier = {
			factor = 10
			at_least_magic_project_level = { project = battlemage_academy level = 1 }
		}
	}
}

estate_mages_investments_in_magical_arts = {
	icon = privilege_give_money
	loyalty = 0.1
	influence = 0.1
	max_absolutism = -5
	conditional_modifier = {
		trigger = {
			has_absolutism_reduction_for_estate_privileges = yes
			NOT = { has_country_flag = remove_absolutism_from_investments hre_reform_passed = anbennar_imperial_wizards }
		}
		modifier = { max_absolutism = 1 }
	}
	land_share = 10
	is_valid = { NOT = { tag = I02 } is_in_mage_mode = yes }
	can_select = { is_in_mage_mode = yes at_least_magical_infrastructure_level_2 = yes }
	
	benefits = {
		mages_estate_experience_mod = 0.2
	}
	conditional_modifier = {
		trigger = { NOT = { has_country_flag = remove_tax_from_investments } }
		modifier = { global_tax_modifier = -0.1 }
		is_bad = yes
	}
	conditional_modifier = {
		trigger = { has_country_flag = remove_absolutism_from_investments }
		modifier = { max_absolutism = 5 }
	}
	conditional_modifier = {
		trigger = { mission_completed = F71_a_silent_strike }
		modifier = { governing_capacity_modifier = 0.05 }
	}
	conditional_modifier = { #eoa imperial wizards
		trigger = {
			hre_reform_passed = anbennar_imperial_wizards
			OR = { is_part_of_hre = yes tag = Z01 is_subject_of = Z01 }
		}
		modifier = { max_absolutism = 5 }
	}

	ai_will_do = {
		factor = 100
	}
}

estate_mages_mages_ascendant = {
	icon = privilege_puppet_ruler
	loyalty = -0.05
	influence = 0.05
	max_absolutism = -10
	conditional_modifier = {
		trigger = {
			has_absolutism_reduction_for_estate_privileges = yes
			NOT = { has_country_flag = remove_absolutism_from_ascendant }
		}
		modifier = { max_absolutism = 2 }
	}
	land_share = 10
	is_valid = { NOT = { tag = I02 } is_in_mage_mode = yes }
	can_select = { is_in_mage_mode = yes at_least_magical_infrastructure_level_3 = yes }
	on_granted = {
		custom_tooltip = tooltip_estate_mages_mages_ascendant
		custom_tooltip = higher_chance_of_powerful_mage_tt
	}
	conditional_modifier = {
		trigger = { has_country_flag = remove_absolutism_from_ascendant }
		modifier = { max_absolutism = 10 }
	}
	
	benefits = {
		mages_privilege_slots = 2
		monarch_spell_levels = 1
	}
	penalties = { yearly_corruption = 0.1 }

	ai_will_do = {
		factor = 0
	}
}

estate_mages_nexus_network = {
	icon = privilege_fort
	loyalty = -0.05
	influence = 0.05
	max_absolutism = -10
	conditional_modifier = {
		trigger = {
			has_absolutism_reduction_for_estate_privileges = yes
			NOT = { has_country_flag = remove_absolutism_from_nexus }
		}
		modifier = { max_absolutism = 2 }
	}
	land_share = 10
	is_valid = { NOT = { tag = I02 } is_in_mage_mode = yes }
	can_select = { is_in_mage_mode = yes at_least_magical_infrastructure_level_4 = yes }

	benefits = {
		mages_mana_regen = 0.25
		mages_mana_capacity = 50
	}
	conditional_modifier = {
		trigger = { has_country_flag = remove_absolutism_from_nexus }
		modifier = { max_absolutism = 5 }
	}

	penalties = { mages_monthly_experience = -2 }

	on_granted = { hidden_effect = { update_mana_regen_vars = yes change_mana = yes } }
	on_revoked = { hidden_effect = { update_mana_regen_vars = yes change_mana = yes } }
	on_invalid = { hidden_effect = { update_mana_regen_vars = yes change_mana = yes } }

	ai_will_do = {
		factor = 100
	}
}

##################
### MONOPOLIES ###
##################

##Slightly different, on not of
estate_mages_monopoly_of_damestear = {
	icon = privilege_monopoly_of_goods_damestear
	loyalty = 0.05
	max_absolutism = -10 #Seems high
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 2 } }
	is_valid = {
		always = yes
		has_dlc = "Emperor"
		NOT = { tag = I02 }
		damestear = 1
	}
	can_select = {
		custom_trigger_tooltip = {
			tooltip = unavailable_during_revolution_disaster
			NOT = { has_disaster = revolution }
			NOT = {
				has_disaster_progress = {
					disaster = revolution
					value = 1
				}
			}
		}
		custom_trigger_tooltip = {
			tooltip = JY_LF_not_trading #Anbennar
			NOT = { has_country_modifier = JY_LF_recent_trade }
		}
		NOT = { has_estate_privilege = estate_artificers_monopoly_of_damestear }
	}
	on_granted = {
		hidden_effect = { export_to_variable = { which = orig_treasury value = treasury } }
		add_years_of_owned_provinces_production_income = {
			years = 1
			trigger = { trade_goods = damestear }
			custom_tooltip = MONOPOLY_INCOME_DAMESTEAR_MANA_DESC
		}
		custom_tooltip = estate_mages_monopoly_of_damestear_effect_tooltip

		hidden_effect = {
			export_to_variable = { which = changed_treasury value = treasury }
			subtract_variable = { which = changed_treasury which = orig_treasury }
			if = {
				limit = { check_variable = { changed_treasury = 150 } }
				set_variable = { changed_treasury = 150 }
			}
			
			change_mana = { var_amount = changed_treasury }
			var_effect = { var = changed_treasury effect = add_treasury sign = - }
		}
	}
	on_granted_province = {
		if = {
			limit = { trade_goods = damestear }
			add_province_modifier = {
				name = estate_mages_monopoly_of_damestear_mod
				duration = -1
			}
		}
		else_if = {
			limit = { has_province_modifier = estate_mages_monopoly_of_damestear_mod }
			remove_province_modifier = estate_mages_monopoly_of_damestear_mod
		}
	}
	on_revoked = {
		custom_tooltip = estate_mages_monopoly_of_damestear_revoke_tooltip
	}
	on_revoked_province = {
		if = {
			limit = { has_province_modifier = estate_mages_monopoly_of_damestear_mod }
			remove_province_modifier = estate_mages_monopoly_of_damestear_mod
		}
	}
	on_invalid = {
		custom_tooltip = estate_mages_monopoly_of_damestear_revoke_tooltip
	}
	on_invalid_province = {
		if = {
			limit = { has_province_modifier = estate_mages_monopoly_of_damestear_mod }
			remove_province_modifier = estate_mages_monopoly_of_damestear_mod
		}
	}
	penalties = {
	}
	benefits = {
		mages_mana_regen = 0.1
	}
	cooldown_years = 10
	on_cooldown_expires = {
		country_event = { id = monopoly_privileges.12 }
	}
	ai_will_do = { #having the AI use these could lead to an unstoppable downwards spiral if it can't work out how to get rid of them
		factor = 0
	}
}

#Made precursor relics cause I could
estate_mages_monopoly_of_relics = {
	icon = privilege_monopoly_of_goods_precursor_relics
	loyalty = 0.05
	max_absolutism = -10 #Seems high
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 2 } }
	is_valid = {
		always = yes
		has_dlc = "Emperor"
		NOT = { tag = I02 }
		any_owned_province = {
			trade_goods = precursor_relics
		}
	}
	can_select = {
		custom_trigger_tooltip = {
			tooltip = unavailable_during_revolution_disaster
			NOT = { has_disaster = revolution }
			NOT = {
				has_disaster_progress = {
					disaster = revolution
					value = 1
				}
			}
		}
		custom_trigger_tooltip = {
			tooltip = JY_LF_not_trading #Anbennar
			NOT = { has_country_modifier = JY_LF_recent_trade }
		}
		NOT = { has_estate_privilege = estate_artificers_monopoly_of_relics }
	}
	on_granted = {
		hidden_effect = { export_to_variable = { which = orig_treasury value = treasury } }
		add_years_of_owned_provinces_production_income = {
			years = 1
			trigger = {
				trade_goods = precursor_relics
			}
			custom_tooltip = MONOPOLY_INCOME_PRECURSOR_RELICS_XP_DESC
		}
		custom_tooltip = estate_mages_monopoly_of_relics_effect_tooltip

		hidden_effect = {
			export_to_variable = { which = changed_treasury value = treasury }
			subtract_variable = { which = changed_treasury which = orig_treasury }
			if = {
				limit = { check_variable = { changed_treasury = 150 } }
				set_variable = { changed_treasury = 150 }
			}

			increase_magic_experience = { unmodified_var_amount = changed_treasury }
			var_effect = { var = changed_treasury effect = add_treasury sign = - }
		}
	}
	on_granted_province = {
		if = {
			limit = { trade_goods = precursor_relics }
			add_province_modifier = {
				name = estate_mages_monopoly_of_relics_mod
				duration = -1
			}
		}
		else_if = {
			limit = { has_province_modifier = estate_mages_monopoly_of_relics_mod }
			remove_province_modifier = estate_mages_monopoly_of_relics_mod
		}
	}
	on_revoked = {
		custom_tooltip = estate_mages_monopoly_of_relics_revoke_tooltip
	}
	on_revoked_province = {
		if = {
			limit = { has_province_modifier = estate_mages_monopoly_of_relics_mod }
			remove_province_modifier = estate_mages_monopoly_of_relics_mod
		}
	}
	on_invalid = {
		custom_tooltip = estate_mages_monopoly_of_relics_revoke_tooltip
	}
	on_invalid_province = {
		if = {
			limit = { has_province_modifier = estate_mages_monopoly_of_relics_mod }
			remove_province_modifier = estate_mages_monopoly_of_relics_mod
		}
	}
	penalties = {
	}
	benefits = {
		mages_ruler_experience_mod = 0.1
		mages_estate_experience_mod = 0.1
	}
	cooldown_years = 10
	on_cooldown_expires = {
		country_event = { id = monopoly_privileges.14 }
	}
	ai_will_do = { #having the AI use these could lead to an unstoppable downwards spiral if it can't work out how to get rid of them
		factor = 0
	}
}


##############################################
### REGIONAL/CULTURAL/RELIGIOUS PRIVILEGES ###
##############################################

estate_mages_monstrous_explorers = { #Monstrous
	icon = privilege_new_world_mission
	loyalty = 0.05
	influence = 0.1
	max_absolutism = -5
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 1 } }
	
	is_valid = { has_country_modifier = monstrous_nation }
	can_select = {
		OR = {
			num_of_colonists = 1
			num_of_colonies = 1
		}
	}
	benefits = {
		may_explore = yes
		native_uprising_chance = -0.25
	}
	ai_will_do = {
		factor = 0
	}
}

estate_mages_spirit_speakers = { #Halessi Religion
	icon = privilege_seek_support_of_brahmins
	loyalty = 0.05
	influence = 0.05
	max_absolutism = -5
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 1 } }
	is_valid = {
		OR = {
			religion_group = halessi
			religion_group = supreme_spirit
		}
		capital_scope = {
			continent = asia
			NOT = { superregion = forbidden_lands_superregion }
		}
	}
	on_granted = {
		custom_tooltip = ancestral_communion_pulse_tooltip
	}
	penalties = {
		global_tax_modifier = -0.1
	}
	benefits = {
		tolerance_own = 1
	}
	cooldown_years = 10
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 3
			OR = {
				religion = neokttareum
				religion = saanorgegh
				religion = mystic_accord
			}
		}
	}
}

estate_mages_temple_desecrators = { #Scouring Religion
	icon = privilege_temple_complex
	loyalty = 0.05
	influence = 0.1
	is_valid = {
		OR = {
			religion = devouring_path
			religion = black_doctrine
		}
		has_country_flag = devouring_temple_secrets
		any_owned_province = {
			OR = {
				superregion = rahen_superregion
				superregion = vimdatrong_superregion
				superregion = yanshen_superregion
			}
		}
	}
	can_select = {
		treasury = 100
		adm_power = 50
		dip_power = 50
		mil_power = 50
		any_owned_province = {
			province_group = temple_province_group
			OR = {
				has_province_modifier = temple_complex 
				has_province_modifier = damaged_temple_complex 
				has_province_modifier = derelict_temple_complex 
			}
			hidden_trigger = { NOT = { has_province_modifier = temple_heart_discovered } }
			is_core = ROOT
		}
	}
	on_granted = {
		add_treasury = -100
		add_adm_power = -50
		add_dip_power = -50
		add_mil_power = -50
		custom_tooltip = estate_khelorvalshi_temple_desecrators_granted_tooltip
		hidden_effect = { country_event = { id = spirits.640 } }
	}
	penalties = {
		global_tax_modifier = -0.1
	}
	benefits = {
	}
	cooldown_years = 5
	ai_will_do = {
		factor = 15
	}
}

estate_mages_empowered_mages = { # NSC: only given via artifice incident
	icon = privilege_demand_more_troops
	influence = 0.10
	is_valid = {
		OR = {
			religion = bulwari_sun_cult
			has_country_flag = updating_isolationism_window
		}
		is_chosen_country = yes
		has_country_flag = nsc_banned_artificery
		# so it doesn't appear until you ban artificery
	}
	can_select = { always = no }

	can_revoke = { always = no }

	on_granted = {
		enable_estate_action = { estate_action = RECRUIT_WAR_WIZARD }
	}
	on_invalid = {
		clr_country_flag = no_battlemage_academies
		disable_estate_action = { estate_action = RECRUIT_WAR_WIZARD }
	}

	penalties = {
		army_tradition_decay = 0.01
		country_military_power = -1
	}
	benefits = {
		land_morale = 0.05
	}
	conditional_modifier = {
	}
	ai_will_do = {
		factor = 10
	}
}

estate_mages_nsc_martial = { #NSC
	icon = privilege_seek_support_of_clergy
	max_absolutism = 0
	loyalty = 0
	influence = 0.05
	is_valid = {
		OR = {
			religion_group = bulwari
			has_country_flag = updating_isolationism_window
		}
		has_country_flag = nsc_magi_martial
	}
	can_revoke = {
		always = no
	}
	penalties = {
	}
	benefits = {
		shock_damage = 0.10
		evocation_experience_mod = 0.1
	}
	conditional_modifier = {        #Burghers
		trigger = {
			has_country_flag = nsc_privilege_burgher_influence
		}
		modifier = {
			max_absolutism = -5
			burghers_influence_modifier = 0.1
			mages_loyalty_modifier = -0.1
		}
	}
	conditional_modifier = {        #Nobility
		trigger = {
			has_country_flag = nsc_privilege_noble_influence
		}
		modifier = {
			max_absolutism = -5
			nobles_influence_modifier = 0.1
			mages_loyalty_modifier = -0.1
		}
	}
	conditional_modifier = {        #Mages
		trigger = {
			has_country_flag = nsc_privilege_magi_influence
		}
		modifier = {
			mages_influence_modifier = 0.1
			mages_loyalty_modifier = 0.1
		}
	}
	conditional_modifier = {        #Both
		trigger = {
			has_country_flag = nsc_privilege_both_influence
		}
		modifier = {
			nobles_influence_modifier = 0.05
			burghers_influence_modifier = 0.05
			mages_loyalty_modifier = -0.1
		}
	}
	ai_will_do = {
		factor = 10
	}
}

estate_mages_nsc_exorcism = { #NSC
	icon = privilege_seek_support_of_clergy
	max_absolutism = 0
	loyalty = 0
	influence = 0.05
	is_valid = {
		OR = {
			religion_group = bulwari
			has_country_flag = updating_isolationism_window
		}
		has_country_flag = nsc_magi_exorcism
	}
	can_revoke = {
		always = no
	}
	penalties = {
	}
	benefits = {
		all_estate_loyalty_equilibrium = 0.05
		abjuration_experience_mod = 0.1
	}
	conditional_modifier = {        #Burghers
		trigger = {
			has_country_flag = nsc_privilege_burgher_influence
		}
		modifier = {
			max_absolutism = -5
			burghers_influence_modifier = 0.1
			mages_loyalty_modifier = -0.1
		}
	}
	conditional_modifier = {        #Nobility
		trigger = {
			has_country_flag = nsc_privilege_noble_influence
		}
		modifier = {
			max_absolutism = -5
			nobles_influence_modifier = 0.1
			mages_loyalty_modifier = -0.1
		}
	}
	conditional_modifier = {        #Mages
		trigger = {
			has_country_flag = nsc_privilege_magi_influence
		}
		modifier = {
			mages_influence_modifier = 0.1
			mages_loyalty_modifier = 0.1
		}
	}
	conditional_modifier = {        #Both
		trigger = {
			has_country_flag = nsc_privilege_both_influence
		}
		modifier = {
			nobles_influence_modifier = 0.05
			burghers_influence_modifier = 0.05
			mages_loyalty_modifier = -0.1
		}
	}
	ai_will_do = {
		factor = 10
	}
}

estate_mages_nsc_gardening = { #NSC
	icon = privilege_seek_support_of_clergy
	max_absolutism = 0
	loyalty = 0
	influence = 0.05
	is_valid = {
		OR = {
			religion_group = bulwari
			has_country_flag = updating_isolationism_window
		}
		has_country_flag = nsc_magi_gardening
	}
	can_revoke = {
		always = no
	}
	penalties = {
	}
	benefits = {
		production_efficiency = 0.1
		transmutation_experience_mod = 0.1
	}
	conditional_modifier = {        #Burghers
		trigger = {
			has_country_flag = nsc_privilege_burgher_influence
		}
		modifier = {
			max_absolutism = -5
			burghers_influence_modifier = 0.1
			mages_loyalty_modifier = -0.1
		}
	}
	conditional_modifier = {        #Nobility
		trigger = {
			has_country_flag = nsc_privilege_noble_influence
		}
		modifier = {
			max_absolutism = -5
			nobles_influence_modifier = 0.1
			mages_loyalty_modifier = -0.1
		}
	}
	conditional_modifier = {        #Mages
		trigger = {
			has_country_flag = nsc_privilege_magi_influence
		}
		modifier = {
			mages_influence_modifier = 0.1
			mages_loyalty_modifier = 0.1
		}
	}
	conditional_modifier = {        #Both
		trigger = {
			has_country_flag = nsc_privilege_both_influence
		}
		modifier = {
			nobles_influence_modifier = 0.05
			burghers_influence_modifier = 0.05
			mages_loyalty_modifier = -0.1
		}
	}
	ai_will_do = {
		factor = 10
	}
}

estate_mages_bulwari_divination = { #NSC
	icon = privilege_seek_support_of_clergy
	max_absolutism = 0
	loyalty = 0
	influence = 0.05
	is_valid = {
		OR = {
			religion_group = bulwari
			has_country_flag = updating_isolationism_window
		}
		has_country_flag = nsc_magi_divination
	}
	can_revoke = {
		always = no
	}
	penalties = {
	}
	benefits = {
		idea_cost = -0.05
		divination_experience_mod = 0.1
	}
	conditional_modifier = {        #Burghers
		trigger = {
			has_country_flag = nsc_privilege_burgher_influence
		}
		modifier = {
			max_absolutism = -5
			burghers_influence_modifier = 0.1
			mages_loyalty_modifier = -0.1
		}
	}
	conditional_modifier = {        #Nobility
		trigger = {
			has_country_flag = nsc_privilege_noble_influence
		}
		modifier = {
			max_absolutism = -5
			nobles_influence_modifier = 0.1
			mages_loyalty_modifier = -0.1
		}
	}
	conditional_modifier = {        #Mages
		trigger = {
			has_country_flag = nsc_privilege_magi_influence
		}
		modifier = {
			mages_influence_modifier = 0.1
			mages_loyalty_modifier = 0.1
		}
	}
	conditional_modifier = {        #Both
		trigger = {
			has_country_flag = nsc_privilege_both_influence
		}
		modifier = {
			nobles_influence_modifier = 0.05
			burghers_influence_modifier = 0.05
			mages_loyalty_modifier = -0.1
		}
	}
	ai_will_do = {
		factor = 10
	}
}

estate_mages_nsc_lapis_eye = { #NSC
	icon = privilege_seek_support_of_clergy
	max_absolutism = 0
	loyalty = 0
	influence = 0.05
	is_valid = {
		OR = {
			religion_group = bulwari
			has_country_flag = updating_isolationism_window
		}
		has_country_flag = nsc_magi_lapis_eye
	}
	can_revoke = {
		always = no
	}
	penalties = {
	}
	benefits = {
		land_morale = 0.05
		conjuration_experience_mod = 0.1
	}
	conditional_modifier = {        #Burghers
		trigger = {
			has_country_flag = nsc_privilege_burgher_influence
		}
		modifier = {
			max_absolutism = -5
			burghers_influence_modifier = 0.1
			mages_loyalty_modifier = -0.1
		}
	}
	conditional_modifier = {        #Nobility
		trigger = {
			has_country_flag = nsc_privilege_noble_influence
		}
		modifier = {
			max_absolutism = -5
			nobles_influence_modifier = 0.1
			mages_loyalty_modifier = -0.1
		}
	}
	conditional_modifier = {        #Mages
		trigger = {
			has_country_flag = nsc_privilege_magi_influence
		}
		modifier = {
			mages_influence_modifier = 0.1
			mages_loyalty_modifier = 0.1
		}
	}
	conditional_modifier = {        #Both
		trigger = {
			has_country_flag = nsc_privilege_both_influence
		}
		modifier = {
			nobles_influence_modifier = 0.05
			burghers_influence_modifier = 0.05
			mages_loyalty_modifier = -0.1
		}
	}
	ai_will_do = {
		factor = 10
	}
}

estate_mages_jexisian_regulations = { #NSC
	icon = privilege_seek_support_of_clergy
	max_absolutism = 0
	loyalty = 0
	influence = 0.0
	is_valid = {
		religion = bulwari_sun_cult
		has_estate_privilege = estate_mages_organization_magi_clans
	}
	can_revoke = {
		custom_trigger_tooltip = {
			tooltip = jexisian_regulations_removal_tt
			is_incident_happened = incident_rebirth_magic
		}
	}
	can_select = { always = no }
	on_granted = {
		custom_tooltip = jexisian_regulations_tt
	}
	on_revoked = {
		custom_tooltip = jexisian_regulations_tt
	}
	penalties = {
		mages_estate_experience_mod = -0.05
		necromancy_experience_mod = -0.2
		conjuration_experience_mod = -0.2
	}
	benefits = {
	}

	ai_will_do = {
		factor = 10
	}
}

estate_mages_zamukaras_focus_platforms = { #Bulwar
	icon = privilege_seek_support_of_clergy
	max_absolutism = 0
	loyalty = -0.05
	influence = 0
	is_valid = {
		has_country_flag = established_zamukaras_flag
	}
	can_select = {
		NOT = { has_estate_privilege = estate_mages_zamukaras_focus_carpets }
	}
	can_revoke = {
		always = yes
	}
	on_granted = {
		custom_tooltip = zamukaras_totaldev_tt
		add_country_modifier = {
			name = zamukaras_focus_platforms_modifier
			duration = -1
		}
	}
	on_revoked = {
		remove_country_modifier = zamukaras_focus_platforms_modifier
	}
	penalties = {
	}
	benefits = {
	}

	conditional_modifier = {
		trigger = { 
			NOT = { total_development = 400 }
		}
		modifier = { 
			amount_of_hussars = 2
		}
	}

	conditional_modifier = {
		trigger = { 
			total_development = 400
			NOT = { total_development = 600 }
		}
		modifier = { 
			amount_of_hussars = 3
		}
	}

	conditional_modifier = {
		trigger = { 
			total_development = 600
			NOT = { total_development = 800 }
		}
		modifier = { 
			amount_of_hussars = 4
		}
	}

	conditional_modifier = {
		trigger = { 
			total_development = 800
			NOT = { total_development = 1000 }
		}
		modifier = { 
			amount_of_hussars = 5
		}
	}

	conditional_modifier = {
		trigger = { 
			total_development = 1000
			NOT = { total_development = 1200 }
		}
		modifier = { 
			amount_of_hussars = 6
		}
	}

	conditional_modifier = {
		trigger = { 
			total_development = 1200
			NOT = { total_development = 1400 }
		}
		modifier = { 
			amount_of_hussars = 7
		}
	}

	conditional_modifier = {
		trigger = { 
			total_development = 1400
		}
		modifier = { 
			amount_of_hussars = 8
		}
	}

	ai_will_do = {
		factor = 10
	}
}

estate_mages_zamukaras_focus_carpets = { #Bulwar
	icon = privilege_seek_support_of_clergy
	max_absolutism = 0
	loyalty = -0.05
	influence = 0
	is_valid = {
		has_country_flag = established_zamukaras_flag
	}
	can_select = {
		NOT = { has_estate_privilege = estate_mages_zamukaras_focus_platforms }
	}
	can_revoke = {
		always = yes
	}
	on_granted = {
		custom_tooltip = zamukaras_totaldev_tt
		add_country_modifier = {
			name = zamukaras_focus_carpets_modifier
			duration = -1
		}
	}
	on_revoked = {
		remove_country_modifier = zamukaras_focus_carpets_modifier
	}
	penalties = {
	}
	benefits = {
	}

	conditional_modifier = {
		trigger = { 
			NOT = { total_development = 400 }
		}
		modifier = { 
			amount_of_hussars = 2
		}
	}

	conditional_modifier = {
		trigger = { 
			total_development = 400
			NOT = { total_development = 600 }
		}
		modifier = { 
			amount_of_hussars = 3
		}
	}

	conditional_modifier = {
		trigger = { 
			total_development = 600
			NOT = { total_development = 800 }
		}
		modifier = { 
			amount_of_hussars = 4
		}
	}

	conditional_modifier = {
		trigger = { 
			total_development = 800
			NOT = { total_development = 1000 }
		}
		modifier = { 
			amount_of_hussars = 5
		}
	}

	conditional_modifier = {
		trigger = { 
			total_development = 1000
			NOT = { total_development = 1200 }
		}
		modifier = { 
			amount_of_hussars = 6
		}
	}

	conditional_modifier = {
		trigger = { 
			total_development = 1200
			NOT = { total_development = 1400 }
		}
		modifier = { 
			amount_of_hussars = 7
		}
	}

	conditional_modifier = {
		trigger = { 
			total_development = 1400
		}
		modifier = { 
			amount_of_hussars = 8
		}
	}

	ai_will_do = {
		factor = 10
	}
}

estate_mages_zamukaras_carpet_siege = { #Bulwar
	icon = privilege_seek_support_of_clergy
	max_absolutism = 0
	loyalty = -0.05
	influence = 0
	is_valid = {
		has_country_flag = established_zamukaras_flag
	}
	can_revoke = {
		always = yes
	}
	penalties = {
	}
	benefits = {
		siege_ability = 0.1
	}

	ai_will_do = {
		factor = 10
	}
}

estate_mages_lawassari_zamukaras = { #Bulwar
	icon = privilege_seek_support_of_clergy
	max_absolutism = 5
	loyalty = 0.05
	influence = 0
	is_valid = {
		has_country_flag = mount_lazzaward_mage_reward_flag
	}
	can_revoke = {
		always = yes
	}
	on_granted = {
		if = {
			limit = { has_country_flag = hyti_odd_hunt }
			add_country_modifier = {
				name = hyti_free_reinforce
				duration = -1
			}
		}
		else = {
			add_country_modifier = {
				name = zamukaras_lawassari_zamukaras_modifier
				duration = -1
			}
		}
	}
	on_revoked = {
		remove_country_modifier = zamukaras_lawassari_zamukaras_modifier
		remove_country_modifier = hyti_free_reinforce
	}
	penalties = {
	}
	benefits = {
	}

	ai_will_do = {
		factor = 10
	}
}

estate_mages_adeeni_magi = { #Rise of Adeen (Sarhal)
	icon = privilege_rahen_castes
	loyalty = 0.05
	influence = 0.05

	is_valid = {
		has_country_flag = rinta_seeker_mages_control_adeen
	}
	can_revoke = {
		
	}
	penalties = {
		allowed_marine_fraction = -0.05
	}

	ai_will_do = {
		factor = 1
	}
}

estate_mages_rangers_drennen_strategy = { #Deepwoods rangers
	icon = privilege_land_rights
	loyalty = 0.05
	influence = 0.1
	max_absolutism = -5
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 1 } }
	is_valid = { 
		primary_culture = wood_elf
		NOT = { has_country_flag = deepwoods_rangers_disabled }
	}
	can_select = {
		any_owned_province = {
			has_province_modifier = deepwoods_rangers_camp
		}
		custom_trigger_tooltip = {
			tooltip = deepwoods_ranger_strategy_cooldown
			OR = {
				NOT = { has_country_flag = picked_ranger_strategy_privilege }
				had_country_flag = {
					flag = picked_ranger_strategy_privilege
					days = 3650
				}
			}
		}
	}
	on_granted = {
		if = {
			limit = { has_estate_privilege = estate_adventurers_rangers_ayeth_strategy }
			remove_estate_privilege = estate_adventurers_rangers_ayeth_strategy
		}
		if = {
			limit = { has_estate_privilege = estate_adventurers_rangers_scotha_strategy }
			remove_estate_privilege = estate_adventurers_rangers_scotha_strategy
		}
		custom_tooltip = deepwoods_rangers_drennen_strategy_tt
		hidden_effect = {
			every_owned_province = {
				limit = { has_province_modifier = deepwoods_rangers_camp }
				add_province_modifier = {
					name = deepwoods_rangers_drennen_strategy_mod
					duration = -1
				}
			}
			clr_country_flag = picked_ranger_strategy_privilege
			set_country_flag = picked_ranger_strategy_privilege
		}
	}
	on_revoked = {
		every_owned_province = {
			limit = { has_province_modifier = deepwoods_rangers_camp }
			remove_province_modifier = deepwoods_rangers_drennen_strategy_mod
		}
	}
	cooldown_years = 10
	ai_will_do = {
		factor = 1
	}
}

estate_mages_soul_bound_weaponry = { #Shadow Pact
	icon = privilege_one_faith_one_culture
	influence = 0.1
	loyalty = 0.05
	is_valid = {
		religion = shadow_pact
		has_country_flag = shadow_warriors_soulforged_1
	}
	can_select = {
	}
	on_granted = {
		add_corruption = 1
		if = {
			limit = { has_country_flag = shadow_warriors_soulforged_2_2 }
			add_country_modifier = {
				name = shadow_warriors_soulforged_2_2
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_flag = shadow_warriors_soulforged_2_1 }
			add_country_modifier = {
				name = shadow_warriors_soulforged_2_1
				duration = -1
			}
		}
		else = {
			add_country_modifier = {
				name = shadow_warriors_soulforged_1
				duration = -1
			}
		}
	}
	on_granted_province = {
	}
	on_revoked = {
		remove_country_modifier = shadow_warriors_soulforged_1
		remove_country_modifier = shadow_warriors_soulforged_2_1
		remove_country_modifier = shadow_warriors_soulforged_2_2
	}
	on_revoked_province = {
	}
	on_invalid = {
	}
	on_invalid_province = {
	}
	penalties = {
		yearly_corruption = 0.1
	}
	benefits = {
	}
	conditional_modifier = {
		trigger = { has_country_flag = shadow_warriors_soulforged_2_1 }
		modifier = {
			army_tradition = 1
		}
	}
	conditional_modifier = {
		trigger = { has_country_flag = shadow_warriors_soulforged_2_2 }
		modifier = {
			church_power_modifier = -0.15
		}
	}
	cooldown_years = 10
	ai_will_do = {
		factor = 10
#		modifier = {
#			factor = 0
#			
#		}
	}
}

estate_mages_dream_speakers = { #Yudunyovi
	icon = privilege_one_faith_one_culture
	loyalty = -0.1
	influence = 0.05
	
	is_valid = {
		religion = yudunyovi
	}

	can_select = {
		unlocked_yudunyovi_deity = { deity = soiti }
	}

	on_granted = {
		custom_tooltip = estate_mages_dream_speakers_tt
		if = {
			limit = { has_personal_deity = soiti }
			add_country_modifier = {
				name = yudunyovi_dream_speakers
				duration = 3650 #10 years
			}
		}
	}

	on_revoked = {
		remove_country_modifier = yudunyovi_dream_speakers
	}

	on_invalid = {
		remove_country_modifier = yudunyovi_dream_speakers
	}

	ai_will_do = {
		factor = 1
	}
}

############################################
### MTS WITH MULTIPLE NON-ORG PRIVILEGES ###
############################################

### Seinathil
estate_mages_bardic_general = { #Seinathil
	icon = privilege_demand_more_troops
	max_absolutism = -5
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 1 } }
	loyalty = 0.05
	influence = 0.05
	is_valid = {
		has_estate_privilege = estate_mages_organization_bardic_college
	}
	land_share = 5
	can_select = {
		army_tradition = 5
		estate_influence = {
			estate = estate_mages
			influence = 30
		}
		NOT = { has_estate_privilege = estate_mages_battlemage_academies }
	}
	on_granted = {
		add_army_tradition = -5
		custom_tooltip = tooltip_estate_mages_bardic_general
		enable_estate_action = { estate_action = RECRUIT_WAR_WIZARD }
	}
	on_revoked = {
		disable_estate_action = { estate_action = RECRUIT_WAR_WIZARD }
	}
	on_invalid = {
		disable_estate_action = { estate_action = RECRUIT_WAR_WIZARD }
	}
	penalties = {
		army_tradition_decay = 0.005
	}
	benefits = {
		land_morale = 0.05
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 2
			personality = ai_militarist
		}
		modifier = {
			factor = 1.5
			is_at_war = yes
		}
		modifier = {
			factor = 0
			NOT = { army_tradition = 1 }	#if you have hella low army tradition, you're gonna want to turn this off
		}
	}
}
estate_mages_peace_songs = { #Seinathil
	icon = privilege_commission_jain_scripture
	max_absolutism = 0
	loyalty = 0.15
	influence = 0.10
	is_valid = {
		has_estate_privilege = estate_mages_organization_bardic_college
	}
	can_select = {
	}
	on_granted = {
	}
	penalties = {
		land_morale = -0.10
	}
	benefits = {
		global_tax_modifier = 0.20
		production_efficiency = 0.20
	}
	ai_will_do = {
		factor = 1
	}
}
estate_mages_skaldic_teachings = { #Seinathil
	icon = privilege_loan_interaction
	max_absolutism = 0
	loyalty = -0.15
	influence = 0.10
	is_valid = {
		has_estate_privilege = estate_mages_organization_bardic_college
		has_country_flag = seinathil_skaldic_teachings
	}
	can_select = {
	}
	on_granted = {
	}
	penalties = {
	}
	benefits = {
		technology_cost  = -0.075
		all_power_cost  = -0.025
	}
	ai_will_do = {
		factor = 1
	}
}

### Orda Aldresia
estate_mages_form_iii = { #Orda Aldresia
	icon = privilege_supply_arms
	loyalty = 0.05
	max_absolutism = -5
	influence = 0.05

	is_valid = { mission_completed = forms_eight_to_three }

	can_select = { NOT = { has_estate_privilege = estate_mages_form_i } }

	benefits = {
		discipline = 0.025
		movement_speed = 0.10
	}
	ai_will_do = { factor = 10 }
}
estate_mages_form_i = { #Orda Aldresia
	icon = privilege_supply_arms
	loyalty = 0.10
	max_absolutism = -5
	influence = 0.20

	is_valid = { mission_completed = forms_eight_to_three }

	can_select = { NOT = { has_estate_privilege = estate_mages_form_iii } }

	benefits = {
		discipline = 0.05
		movement_speed = 0.15
	}
	ai_will_do = { factor = 10 }
}
estate_mages_archaic_traditions = { #Orda Aldresia
	icon = privilege_tolerance_heathen
	loyalty = 0.10
	influence = 0.15
	is_valid = {
		has_estate_privilege = estate_mages_archaic_traditions
		NOT = { mission_completed = guardians_of_the_empire }
	}
	can_revoke = {
		mission_completed = guardians_of_the_empire
	}
	on_granted = {
		enable_estate_action = { estate_action = RECRUIT_WAR_WIZARD }
	}
	on_revoked = {
		disable_estate_action = { estate_action = RECRUIT_WAR_WIZARD }
	}
	on_invalid = {
		disable_estate_action = { estate_action = RECRUIT_WAR_WIZARD }
	}
	penalties = {
		mil_tech_cost_modifier = 0.1
	}
	ai_will_do = {
		factor = 0
	}
}

### Verkal Ozovar
estate_mages_grand_rune_amekh = { #Verkal Ozovar
	icon = privilege_cast_spell
	is_valid = { has_country_flag = Y63_engraved_amekh }
	can_select = {
		always = yes
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		every_subject_country = {
			add_country_modifier = {
				name = Y63_grand_rune_amekh
				duration = -1
			}
		}
		hidden_effect = {
			remove_estate_privilege = estate_mages_grand_rune_guntir
			if = { limit = { has_estate_privilege = estate_mages_grand_rune_jolkin }
				clear_grand_rune_jorkid_effect = yes
				remove_estate_privilege = estate_mages_grand_rune_jolkin
			}
		}
	}
	on_revoked = {
	}
	ai_will_do = {
		factor = 1
	}
}
estate_mages_grand_rune_guntir = { #Verkal Ozovar
	icon = privilege_cast_spell
	is_valid = { has_country_flag = Y63_engraved_guntir }
	can_select = {
		always = yes
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		hidden_effect = {
			if = { limit = { has_estate_privilege = estate_mages_grand_rune_amekh }
				clear_grand_rune_amekh_effect = yes
				remove_estate_privilege = estate_mages_grand_rune_amekh
			}
			if = { limit = { has_estate_privilege = estate_mages_grand_rune_jolkin }
				clear_grand_rune_jorkid_effect = yes
				remove_estate_privilege = estate_mages_grand_rune_jolkin
			}
		}
	}
	benefits = {
		mages_ruler_experience_mod = 0.25
	}
	on_revoked = {
	}
	ai_will_do = {
		factor = 1
	}
}
estate_mages_grand_rune_jolkin = { #Verkal Ozovar
	icon = privilege_cast_spell
	is_valid = { has_country_flag = Y63_engraved_jolkin }
	can_select = {
		always = yes
	}
	can_revoke = {
		always = no
	}
	benefits = {
		all_power_cost = -0.05
	}
	on_granted = {
		every_subject_country = {
			add_country_modifier = {
				name = Y63_grand_rune_jolkin
				duration = -1
			}
		}
		hidden_effect = {
			if = { limit = { has_estate_privilege = estate_mages_grand_rune_amekh }
				clear_grand_rune_amekh_effect = yes
				remove_estate_privilege = estate_mages_grand_rune_amekh
			}
			remove_estate_privilege = estate_mages_grand_rune_guntir
		}
	}
	on_revoked = {
	}
	ai_will_do = {
		factor = 1
	}
}
estate_mages_grand_rune_krakdhum = { #Verkal Ozovar
	icon = privilege_cast_spell
	is_valid = { has_country_flag = Y63_engraved_krakdhum }
	can_select = {
		always = yes
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		5424 = {
			add_province_modifier = {
				name = Y63_grand_rune_krakdhum
				duration = -1
			}
		}
		every_subject_country = {
			every_owned_province = {
				limit = {
					OR = {
						trade_goods = coal
						trade_goods = iron
						trade_goods = copper
						trade_goods = mithril
					}
				}
				add_province_modifier = {
					name = Y63_grand_rune_krakdhum
					duration = -1
				}
			}
		}
		hidden_effect = {
			if = { limit = { has_estate_privilege = estate_mages_grand_rune_haln }
				clear_grand_rune_haln_effect = yes
				remove_estate_privilege = estate_mages_grand_rune_haln
			}
			if = { limit = { has_estate_privilege = estate_mages_grand_rune_kron }
				remove_estate_privilege = estate_mages_grand_rune_kron
			}
		}
	}
	on_revoked = {
	}
	ai_will_do = {
		factor = 1
	}
}
estate_mages_grand_rune_haln = { #Verkal Ozovar
	icon = privilege_cast_spell
	is_valid = { has_country_flag = Y63_engraved_haln }
	can_select = {
		always = yes
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		5424 = {
			add_grand_rune_haln_effect = yes
		}
		every_subject_country = {
			every_owned_province = {
				limit = { has_terrain = farmlands }
				add_province_modifier = {
					name = Y63_grand_rune_haln
					duration = -1
				}
			}
		}
		hidden_effect = {
			if = { limit = { has_estate_privilege = estate_mages_grand_rune_krakdhum }
				clear_grand_rune_krakdhum_effect = yes
				remove_estate_privilege = estate_mages_grand_rune_krakdhum
			}
			if = { limit = { has_estate_privilege = estate_mages_grand_rune_kron }
				remove_estate_privilege = estate_mages_grand_rune_kron
			}
		}
	}
	on_revoked = {
	}
	ai_will_do = {
		factor = 1
	}
}
estate_mages_grand_rune_kron = { #Verkal Ozovar
	icon = privilege_cast_spell
	is_valid = { has_country_flag = Y63_engraved_kron }
	can_select = {
		always = yes
	}
	can_revoke = {
		always = no
	}
	benefits = {
		reduced_liberty_desire = 30
	}
	on_granted = {
		hidden_effect = {
			if = { limit = { has_estate_privilege = estate_mages_grand_rune_krakdhum }
				clear_grand_rune_krakdhum_effect = yes
				remove_estate_privilege = estate_mages_grand_rune_krakdhum
			}
			if = { limit = { has_estate_privilege = estate_mages_grand_rune_haln }
				clear_grand_rune_haln_effect = yes
				remove_estate_privilege = estate_mages_grand_rune_haln
			}
		}
	}
	ai_will_do = {
		factor = 1
	}
}
estate_mages_grand_rune_dauth = { #Verkal Ozovar
	icon = privilege_cast_spell
	is_valid = { has_country_flag = Y63_engraved_dauth }
	can_select = {
		always = yes
	}
	can_revoke = {
		always = no
	}
	benefits = {
		morale_damage = 0.15
		fire_damage_received = -0.05
	}
	on_granted = {
		hidden_effect = {
			remove_estate_privilege = estate_mages_grand_rune_kanzad
			remove_estate_privilege = estate_mages_grand_rune_bal
		}
	}
	ai_will_do = {
		factor = 1
	}
}
estate_mages_grand_rune_kanzad = { #Verkal Ozovar
	icon = privilege_cast_spell
	is_valid = { has_country_flag = Y63_engraved_kanzad }
	can_select = {
		always = yes
	}
	can_revoke = {
		always = no
	}
	benefits = {
		artillery_power = 0.15
		artillery_cost = -0.1
	}
	on_granted = {
		hidden_effect = {
			remove_estate_privilege = estate_mages_grand_rune_dauth
			remove_estate_privilege = estate_mages_grand_rune_bal
		}
	}
	ai_will_do = {
		factor = 1
	}
}
estate_mages_grand_rune_bal = { #Verkal Ozovar
	icon = privilege_cast_spell
	is_valid = { has_country_flag = Y63_engraved_bal }
	can_select = {
		always = yes
	}
	can_revoke = {
		always = no
	}
	benefits = {
		fire_damage = 0.1
		infantry_fire = 0.1
	}
	on_granted = {
		hidden_effect = {
			remove_estate_privilege = estate_mages_grand_rune_dauth
			remove_estate_privilege = estate_mages_grand_rune_kanzad
		}
	}
	ai_will_do = {
		factor = 1
	}
}

### Krakdhumvror
estate_mages_supply_more_iron = { #Krakdhumvror
	icon = privilege_monopoly_of_goods_iron
	influence = 0.2
	loyalty = 0.1
	is_valid = { tag = I02 }
	can_select = {
		any_owned_province = {
			trade_goods = iron
			NOT = { province_id = 4208 }
		}
		NOT = { has_estate_privilege = estate_nobles_monopoly_of_metals }
	}
	on_granted = {
		custom_tooltip = estate_mages_supply_more_iron_effect
	}
	on_granted_province = {
		if = {
			limit = {
				trade_goods = iron
				NOT = { province_id = 4208 }
			}
			add_province_modifier = { name = krak_supply_more_iron duration = 3650 }
		}
		else_if = {
			limit = {
				has_province_modifier = krak_supply_more_iron
			}
			remove_province_modifier = krak_supply_more_iron
		}
	}
	on_revoked = {
		custom_tooltip = estate_mages_supply_more_iron_revoke
	}
	on_revoked_province = {
		if = {
			limit = { has_province_modifier = krak_supply_more_iron }
			remove_province_modifier = krak_supply_more_iron
		}
	}
	on_invalid = {
		custom_tooltip = estate_mages_supply_more_iron_revoke
	}
	on_invalid_province = {
		if = {
			limit = { has_province_modifier = krak_supply_more_iron }
			remove_province_modifier = krak_supply_more_iron
		}
	}
	penalties = {}
	benefits = {}
	cooldown_years = 10
	on_cooldown_expires = { country_event = { id = flavor_krak.107 } }
	ai_will_do = { factor = 0 }
}
estate_mages_perform_icecraft = { #Krakdhumvror
	icon = privilege_tolerance_heathen
	can_select = {
		always = no
	}
	is_valid = {
		tag = I02
		has_estate_privilege = estate_mages_perform_icecraft
		NOT = { has_country_flag = revoke_mage_estate_spells }
	}
	on_granted = {
	}
	penalties = {
	}
	benefits = {
	}
	cooldown_years = 10
	on_cooldown_expires = {
		set_country_flag = revoke_mage_estate_spells # on_invalid gives a notification, on_revoked does not.
	}
	on_invalid = {
		clr_country_flag = revoke_mage_estate_spells
	}
	ai_will_do = {
		factor = 10
	}
}
estate_mages_ice_sculptures = { #Krakdhumvror
	icon = privilege_build_jain_temple
	is_valid = {
		tag = I02
		mission_completed = krak_freezing_history
	}
	can_select = {
		always = yes
	}
	can_revoke = {
		always = no
	}
	on_granted = {
	}
	penalties = {
	}
	benefits = {
		diplomatic_reputation = 2
		monthly_splendor = 1
	}

	ai_will_do = { factor = 0 }
}

### Newshire
estate_mages_experimental_lands = { #Newshire
	icon = privilege_bloody_rose
	max_absolutism = 0
	land_share = 5
	is_valid = {
		has_country_flag = newshire_experimenting_flag
		NOT = { has_country_flag = revoke_experimental_lands }
	}
	on_granted = {
		custom_tooltip = experimental_lands_tooltip
		hidden_effect = {
			random_owned_province = {
				limit = {
					NOT = {
						OR = {
							has_province_modifier = newshire_experimental_lands
							has_province_modifier = newshire_transmuted_lands
							has_province_modifier = newshire_headquarters
						}
					}
				}
				add_province_modifier = {
					name = newshire_experimental_lands
					duration = 1855
				}
				add_devastation = 25
				set_province_flag = transmutation_target_flag
			}
		}
	}
	penalties = {
	}
	benefits = {
	}
	cooldown_years = 5
	on_cooldown_expires = {
		every_owned_province = {
			limit = { has_province_flag = transmutation_target_flag }
			add_province_modifier = {
				name = newshire_transmuted_lands
				duration = -1
			}
			clr_province_flag = transmutation_target_flag
		}
		set_country_flag = revoke_experimental_lands
	}
	on_invalid = {
		clr_country_flag = revoke_experimental_lands
	}
	ai_will_do = {
		factor = 0
	}
}
estate_mages_vivomantic_mastery = { #Newshire
	icon = privilege_bloody_rose
	max_absolutism = 0
	land_share = 5
	is_valid = {
		has_country_flag = vivomantic_mastery_flag
		any_owned_province = {
			has_building = mage_tower
			base_tax = 5
			base_manpower = 5
		}
		NOT = { has_country_flag = revoke_vivomantic_mastery }
	}
	on_granted = {
		custom_tooltip = vivomantic_mastery_tooltip
		hidden_effect = {
			random_owned_province = {
				limit = {
					NOT = {
						OR = {
							has_province_modifier = newshire_experimental_lands
							has_province_modifier = newshire_transmuted_lands
							has_province_modifier = newshire_headquarters
						}
					}
					has_building = mage_tower
					base_tax = 5
					base_manpower = 5
				}
				add_province_modifier = {
					name = newshire_experimental_lands
					duration = 1855
				}
				add_devastation = 50
				set_province_flag = transmutation_target_flag
			}
		}
	}
	penalties = {
	}
	benefits = {
	}
	cooldown_years = 5
	on_cooldown_expires = {
		every_owned_province = {
			limit = { has_province_flag = transmutation_target_flag }
			add_province_modifier = {
				name = newshire_transmuted_lands
				duration = -1
			}
			add_base_tax = -4
			add_base_production = 9
			add_base_manpower = -4
			clr_province_flag = transmutation_target_flag
		}
		set_country_flag = revoke_vivomantic_mastery
	}
	on_invalid = { clr_country_flag = revoke_vivomantic_mastery }
	ai_will_do = {
		factor = 10
	}
}
estate_mages_vivomantic_mastery_final = { #Newshire
	icon = privilege_bloody_rose
	max_absolutism = 0
	land_share = 5
	is_valid = {
		has_country_flag = newshire_growing_strong_flag
		any_owned_province = {
			has_building = mage_tower
			base_tax = 5
			base_manpower = 5
		}
		NOT = { has_country_flag = revoke_vivomantic_mastery_final }
	}
	on_granted = {
		custom_tooltip = vivomantic_mastery_tooltip
		hidden_effect = {
			random_owned_province = {
				limit = {
					NOT = {
						OR = {
							has_province_modifier = newshire_experimental_lands
							has_province_modifier = newshire_vivomantic_mastery
							has_province_modifier = newshire_headquarters
						}
					}
					has_building = mage_tower
					base_tax = 5
					base_manpower = 5
				}
				add_province_modifier = {
					name = newshire_experimental_lands
					duration = 1855
				}
				add_devastation = 50
				set_province_flag = transmutation_target_flag
			}
		}
	}
	penalties = {
	}
	benefits = {
	}
	cooldown_years = 5
	on_cooldown_expires = {
		every_owned_province = {
			limit = { has_province_flag = transmutation_target_flag }
			add_province_modifier = {
				name = newshire_vivomantic_mastery
				duration = -1
			}
			add_base_tax = -4
			add_base_production = 9
			add_base_manpower = -4
			clr_province_flag = transmutation_target_flag
		}
		set_country_flag = revoke_vivomantic_mastery_final
	}
	on_invalid = { clr_country_flag = revoke_vivomantic_mastery_final }
	ai_will_do = {
		factor = 0
	}
}

### Masked Butcher
estate_mages_steady_ichorletting = { #Masked Butcher
	icon = kumarkand_rangers
	land_share = 5
	influence = 0.05
	loyalty = 0.05

	is_valid = { has_estate_privilege = estate_mages_steady_ichorletting }
	can_select = { has_estate_privilege = estate_mages_steady_ichorletting }
	can_revoke = { always = no }

	on_granted = {
		custom_tooltip = free_focusing_tt
		set_country_flag = focusing_is_free_flag
	}

	on_revoked = {
		clr_country_flag = focusing_is_free_flag
	}

	on_invalid = {
		clr_country_flag = focusing_is_free_flag
	}

	benefits = {
		monthly_church_power = 0.5
	}

	ai_will_do = { factor = 10 }
}
estate_mages_great_fey_mask = { #Masked Butcher
	icon = privilege_bloody_masquerade
	influence = 0.05
	loyalty = 0.05

	is_valid = { has_estate_privilege = estate_mages_great_fey_mask }
	can_select = { has_estate_privilege = estate_mages_great_fey_mask }
	can_revoke = { always = no }

	on_granted = {
		custom_tooltip = great_fey_mask_tt
	}

	on_granted_province = {
		if = {
			limit = { OR = { region = east_deepwoods_region region = west_deepwoods_region } }
			add_province_modifier = {
				name = mb_deepwoods_buff
				duration = -1
			}
		}
	}

	on_revoked_province = {
		if = {
			limit = { has_province_modifier = mb_deepwoods_buff }
			remove_province_modifier = mb_deepwoods_buff
		}
	}

	benefits = {
		mages_privilege_slots = 1
	}

	ai_will_do = { factor = 10 }
}
estate_mages_all_mask = { #Masked Butcher
	icon = privilege_the_dark_host

	is_valid = { has_estate_privilege = estate_mages_all_mask }
	can_select = { has_estate_privilege = estate_mages_all_mask }
	can_revoke = { always = no }

	on_granted = {
		custom_tooltip = bonus_level_3_capacity_tt
	}

	benefits = {
		mages_privilege_slots = 1
		all_power_cost = -0.05
	}

	ai_will_do = { factor = 10 }
}

### Gor Vazumbrog
estate_mages_invest_into_work_golem_facilites = { #Gor Vazumbrog
	icon = privilege_golem
	influence = 0
	loyalty = 0.05
	land_share = 5
	max_absolutism = 0
	is_valid = {
		tag = I14
		mission_completed = gor_vazumbrog_forgotten_art
	}
	can_select = {
		NOT = { has_estate_privilege = estate_mages_invest_into_army_golem_facilites }
		custom_trigger_tooltip = {
			tooltip = GV_TT_WORK_GOLEM_FACILITIES_MAXED
			NOT = {
				check_variable = {
					which = gorVazumbrogWorkGolemFacilities
					which = gorVazumbrogWorkGolemCapacity
				}
			}
		}
	}
	can_revoke = { always = no }
	on_granted = {
		if = {
			limit = { monthly_income = 40 }
			add_treasury = -500
		}
		else = { add_years_of_income = -1 }
		custom_tooltip = gor_vazumbrog_work_golem_investment_tt
	}
	
	on_invalid = {
	}
	
	penalties = { }
	
	benefits = { }
	
	cooldown_years = 5
	on_cooldown_expires = {
		change_variable = {
			which = gorVazumbrogWorkGolemFacilities
			value = 1
		}
		update_golem_workforce_modifier = yes
		remove_estate_privilege = estate_mages_invest_into_work_golem_facilites
	}
	ai_will_do = {
		factor = 1
	}
}
estate_mages_invest_into_army_golem_facilites = { #Gor Vazumbrog
	icon = privilege_golem_army
	influence = 0
	loyalty = 0.05
	land_share = 5
	max_absolutism = 0
	is_valid = {
		tag = I14
		mission_completed = gor_vazumbrog_golems_in_the_army
	}
	can_select = {
		NOT = { has_estate_privilege = estate_mages_invest_into_work_golem_facilites }
		custom_trigger_tooltip = {
			tooltip = GV_TT_ARMY_GOLEM_FACILITIES_MAXED
			NOT = {
				check_variable = {
					which = gorVazumbrogArmyGolemFacilities
					which = gorVazumbrogArmyGolemCapacity
				}
			}
		}
	}
	can_revoke = { always = no }
	on_granted = {
		if = {
			limit = { monthly_income = 40 }
			add_treasury = -500
		}
		else = { add_years_of_income = -1 }
		custom_tooltip = gor_vazumbrog_army_golem_investment_tt
	}
	
	on_invalid = {
	}
	
	penalties = { }
	
	benefits = { }
	
	cooldown_years = 5
	on_cooldown_expires = {
		change_variable = {
			which = gorVazumbrogArmyGolemFacilities
			value = 1
		}
		update_army_golem_modifier = yes
		remove_estate_privilege = estate_mages_invest_into_army_golem_facilites
	}
	ai_will_do = {
		factor = 1
	}
}

### Rakkaz
estate_mages_warlock_pact_power = { #Rakkaz
	icon = privilege_cast_spell
	loyalty = 0
	influence = 0
	is_valid = {
		has_unlocked_estate_privilege = { estate_privilege = estate_mages_warlock_pact_power }
		NOT = { has_country_flag = revoke_warlock_pact_power }
	}
	can_select = {
		rakkaz_warlock_pact_limit = yes
		years_of_manpower = 0.5
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		add_yearly_manpower = -0.5
	}
	benefits = {
		land_morale = 0.05
		shock_damage = 0.1
	}
	ai_will_do = {
		factor = 1
	}
	cooldown_years = 10 
 	on_cooldown_expires = { 
		set_country_flag = revoke_warlock_pact_power 
		country_event = { id = flavour_rakkaz.13 days = 1 }
	}
}
estate_mages_warlock_pact_exploitation = { #Rakkaz
	icon = privilege_cast_spell
	loyalty = 0
	influence = 0
	is_valid = {
		has_unlocked_estate_privilege = { estate_privilege = estate_mages_warlock_pact_exploitation }
		NOT = { has_country_flag = revoke_warlock_pact_exploitation }
	}
	can_select = {
		rakkaz_warlock_pact_limit = yes
		any_owned_province = {
			trade_goods = slaves
		}
		if = {
			limit = { religion = xhazobkult }
			patriarch_authority = 0.2
		}
		if = {
			limit = { religion = shadow_pact }
			church_power = 100
		}
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		if = {
			limit = { religion = xhazobkult }
			complex_dynamic_effect = {
				first_custom_tooltip = rakkaz_has_invocation_of_chains
				first_limit = "
					current_icon = invocation_of_chains
				"
				first_effect = "
					add_owned_provinces_development_ducats = {
						multiplier = 1
						trigger = { trade_goods = slaves }
					}
				"
			}
			custom_tooltip = " "
		}
		if = {
			limit = { religion = shadow_pact }
			complex_dynamic_effect = {
				first_custom_tooltip = rakkaz_has_tyrant_portent
				first_limit = "
					OR = {
						has_church_aspect = shadow_pact_tyrant_adm
						has_church_aspect = shadow_pact_tyrant_dip
						has_church_aspect = shadow_pact_tyrant_mil
					}
				"
				first_effect = "
					add_owned_provinces_development_ducats = {
						multiplier = 2
						trigger = { trade_goods = slaves }
					}
				"
			}
			custom_tooltip = " "
		}
		custom_tooltip = rakkaz_exploitation_effect_tooltip
		tooltip = {
			add_province_modifier = {
				name = rakkaz_slave_exploitation
				duration = 3650
			}
		}
		if = {
			limit = { religion = xhazobkult }
			add_patriarch_authority = -0.2
		}
		if = {
			limit = { religion = shadow_pact }
			add_church_power = -100
		}
		hidden_effect = {
			every_owned_province = {
				limit = {
					trade_goods = slaves
					development = 10
				}
				add_province_modifier = {
					name = rakkaz_slave_exploitation
					duration = 3650
				}
			}
		}
	}
	benefits = {}
	ai_will_do = {
		factor = 1
	}
	cooldown_years = 10 
 	on_cooldown_expires = { 
		set_country_flag = revoke_warlock_pact_exploitation 
		country_event = { id = flavour_rakkaz.13 days = 1 }
	}
}
estate_mages_warlock_pact_overcharge = { #Rakkaz
	icon = privilege_cast_spell
	loyalty = 0
	influence = 0
	is_valid = {
		has_unlocked_estate_privilege = { estate_privilege = estate_mages_warlock_pact_overcharge }
		NOT = { has_country_flag = revoke_warlock_pact_overcharge }
	}
	can_select = {
		rakkaz_warlock_pact_limit = yes
		any_owned_province = {
			has_building = mage_tower
		}
		adm_power = 100
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		add_adm_power = -100
		custom_tooltip = rakkaz_every_owned_province_with_a_mage_tower
		tooltip = {
			add_province_modifier = {
				name = rakkaz_pact_overcharge
				duration = 3650
			}
		}
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_building = mage_tower
				}
				area = {
					limit = { owned_by = ROOT }
					add_province_modifier = {
						name = rakkaz_pact_overcharge
						duration = 3650
					}
				}
			}
		}
	}
	benefits = {}
	penalties = {
		global_unrest = 4
	}
	ai_will_do = {
		factor = 1
	}
	cooldown_years = 10 
 	on_cooldown_expires = { 
		set_country_flag = revoke_warlock_pact_overcharge 
		country_event = { id = flavour_rakkaz.13 days = 1 }
	}
}
estate_mages_warlock_pact_domination = { #Rakkaz
	icon = privilege_cast_spell
	loyalty = 0
	influence = 0
	is_valid = {
		has_unlocked_estate_privilege = { estate_privilege = estate_mages_warlock_pact_domination }
		NOT = { has_country_flag = revoke_warlock_pact_domination }
	}
	can_select = {
		rakkaz_warlock_pact_limit = yes
		if = {
			limit = { religion = xhazobkult }
			patriarch_authority = 0.1
		}
		if = {
			limit = { religion = shadow_pact }
			church_power = 50
		}
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		if = {
			limit = { religion = xhazobkult }
			add_patriarch_authority = -0.1
		}
		if = {
			limit = { religion = shadow_pact }
			add_church_power = -50
		}
		add_rebel_progress = { value = -100 }
	}
	benefits = {
		global_unrest = -2
		harsh_treatment_cost = -0.75
	}
	penalties = {}
	ai_will_do = {
		factor = 1
	}
	cooldown_years = 10 
 	on_cooldown_expires = { 
		set_country_flag = revoke_warlock_pact_domination 
		country_event = { id = flavour_rakkaz.13 days = 1 }
	}
}
estate_mages_warlock_pact_unrestricted_savagery = { #Rakkaz
	icon = privilege_cast_spell
	loyalty = 0
	influence = 0
	is_valid = {
		has_unlocked_estate_privilege = { estate_privilege = estate_mages_warlock_pact_unrestricted_savagery }
		NOT = { has_country_flag = revoke_warlock_pact_unrestricted_savagery }
	}
	can_select = {
		rakkaz_warlock_pact_limit = yes
		patriarch_authority = 0.1
		mil_power = 100
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		add_patriarch_authority = -0.1
		add_mil_power = -100
	}
	benefits = {
		global_attacker_dice_roll_bonus = 1
	}
	penalties = { }
	ai_will_do = {
		factor = 1
	}
	cooldown_years = 10 
	on_cooldown_expires = { 
		set_country_flag = revoke_warlock_pact_unrestricted_savagery 
		country_event = { id = flavour_rakkaz.13 days = 1 }
	}
}
estate_mages_warlock_pact_battlefield_domination = { #Rakkaz
	icon = privilege_cast_spell
	loyalty = 0
	influence = 0
	is_valid = {
		has_unlocked_estate_privilege = { estate_privilege = estate_mages_warlock_pact_battlefield_domination }
		NOT = { has_country_flag = revoke_warlock_pact_battlefield_domination }
	}
	can_select = {
		rakkaz_warlock_pact_limit = yes
		church_power = 100
		years_of_manpower = 1
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		add_church_power = -100
		add_yearly_manpower = -1
	}
	benefits = {
		assault_fort_ability = 0.4
		artillery_barrage_cost = -0.5
	}
	penalties = { }
	ai_will_do = {
		factor = 1
	}
	cooldown_years = 10 
	on_cooldown_expires = { 
		set_country_flag = revoke_warlock_pact_battlefield_domination 
		country_event = { id = flavour_rakkaz.13 days = 1 }
	}
}
estate_mages_warlock_pact_demonic_possession = { #Rakkaz
	icon = privilege_cast_spell
	loyalty = 0
	influence = 0
	is_valid = { has_unlocked_estate_privilege = { estate_privilege = estate_mages_warlock_pact_demonic_possession  } }
	can_select = {
		rakkaz_warlock_pact_limit = yes
		patriarch_authority = 0.1
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		add_patriarch_authority = -0.1
		change_adm = -3
		change_dip = -3
		tooltip = { change_mil = 6 }
		hidden_effect = {
			increase_ruler_mil_effect = yes
			increase_ruler_mil_effect = yes
			increase_ruler_mil_effect = yes
			increase_ruler_mil_effect = yes
			increase_ruler_mil_effect = yes
			increase_ruler_mil_effect = yes
		}
		custom_tooltip = rakkaz_demonic_possession_tooltip
		hidden_effect = {
			country_event = { id = flavour_rakkaz.24 } #Can't add ruler personalities here, so I made it in a hidden event.
		}
	}
	benefits = { }
	penalties = { }
	ai_will_do = {
		factor = 1
	}
	cooldown_years = 10 
	on_cooldown_expires = { country_event = { id = flavour_rakkaz.15 } }
}
estate_mages_warlock_pact_night_coven = { #Rakkaz
	icon = privilege_cast_spell
	loyalty = 0
	influence = 0
	is_valid = { has_unlocked_estate_privilege = { estate_privilege = estate_mages_warlock_pact_night_coven  } }
	can_select = {
		rakkaz_warlock_pact_limit = yes
		church_power = 100
	}
	can_revoke = {
		always = no
	}
	on_granted = {
		add_church_power = -100
		increase_ruler_adm_effect = yes
		increase_ruler_dip_effect = yes
		increase_ruler_mil_effect = yes
		custom_tooltip = rakkaz_night_coven_tooltip
		hidden_effect = {
			country_event = { id = flavour_rakkaz.25 } #Can't add ruler personalities here, so I made it in a hidden event.
		}
	}
	benefits = { }
	penalties = { }
	ai_will_do = {
		factor = 1
	}
	cooldown_years = 10 
	on_cooldown_expires = { 
		random_list = {
			50 = { country_event = { id = flavour_rakkaz.16 }  }
			20 = { country_event = { id = flavour_rakkaz.17 }  }
			20 = { country_event = { id = flavour_rakkaz.18 }  }
			9 = { country_event = { id = flavour_rakkaz.19 }  }
			1 = { country_event = { id = flavour_rakkaz.20 }  }
		}
	}
}

### Wyvernheart
estate_wyvernheart_subservient_artificers = { #Wyvernheart
	icon = privilege_subservient_artificers
	max_absolutism = 0
	influence = -0.05
	loyalty = -0.05
	land_share = 0
	is_valid = { mission_completed = welcoming_the_immoral }
	can_select = { mission_completed = welcoming_the_immoral }
	on_granted = {
		custom_tooltip = estate_wyvernheart_subservient_artificers_tt
	}
	on_revoked = {
	}
	on_invalid = {
	}
	penalties = {
		
	}
	benefits = {
		same_culture_advisor_cost = -0.10
		monthly_bloodbrand_power = 0.25
	}
	can_revoke = {
		always = no
	}
	ai_will_do = {
		factor = 1
	}
}
estate_wyvernheart_floodborn_council = { #Wyvernheart
	icon = privilege_one_faith_one_culture
	max_absolutism = 10
	influence = 0.25
	loyalty = 0.10
	land_share = 0
	is_valid = { mission_completed = the_red_flood }
	can_select = { mission_completed = the_red_flood }
	on_granted = {
		custom_tooltip = estate_wyvernheart_floodborn_council_tt
	}
	on_revoked = {
		custom_tooltip = estate_wyvernheart_floodborn_council_tt
	}
	on_invalid = {
	}
	penalties = {
		
	}
	benefits = {
		monthly_bloodbrand_power = 0.25
		mages_monthly_experience = 2

		#+1 movement for war wizards #included in the war wizard scripted effect
	}
	can_revoke = {
		always = no
	}
	ai_will_do = {
		factor = 1
	}
}

### Zokka
estate_mages_kelmaxherho_pragmatism = { #Zokka
	icon = privilege_autonomy
	is_valid = {
		has_government_attribute = enables_corrivalry
		NOT = { has_country_flag = kelmaxherho_dead }
	}
	can_select = {
		has_government_attribute = enables_corrivalry
		NOT = { has_country_modifier = racial_pop_human_purge }
		NOT = { has_country_modifier = racial_pop_human_expulsion }
	}
	on_granted = {
		scaling_with_influence_privilege_tooltip = {
			estate_privilege = estate_mages_kelmaxherho_pragmatism
		}
	}
	on_revoked = {
		scaling_with_influence_privilege_tooltip = {
			estate_privilege = estate_mages_kelmaxherho_pragmatism
		}
	}
	influence_scaled_conditional_modifier = {	#Modifier that are applied if the specified conditions are true. At 100% Influence you gain 100% of the modifier.
		trigger = {
			NOT = {
				estate_loyalty = {
					estate = estate_mages
					loyalty = 30
				}
			}
		}
		modifier = {
			technology_cost = 0.1
			church_loyalty_modifier = -0.1
		}
	}
	influence_scaled_conditional_modifier = {	#Modifier that are applied if the specified conditions are true. At 100% Influence you gain 100% of the modifier.
		trigger = {
			estate_loyalty = {
				estate = estate_mages
				loyalty = 30
			}
			NOT = {
				estate_loyalty = {
					estate = estate_mages
					loyalty = 60
				}
			}
		}
		modifier = {
			technology_cost = -0.05
			church_loyalty_modifier = -0.15
		}
	}
	influence_scaled_conditional_modifier = {	#Modifier that are applied if the specified conditions are true. At 100% Influence you gain 100% of the modifier.
		trigger = {
			estate_loyalty = {
				estate = estate_mages
				loyalty = 60
			}
		}
		modifier = {
			technology_cost = -0.1
			church_loyalty_modifier = -0.2
		}
	}
	ai_will_do = {
		factor = 1000
	}
}
estate_mages_organization_favoured_slaves = { #Zokka - Special org out of place
	icon = privilege_promote_maratha_nobility
	loyalty = 0.15
	influence = 0.15
	is_valid = { has_estate_privilege = estate_mages_organization_favoured_slaves }
	can_select = { has_estate_privilege = estate_mages_organization_favoured_slaves }
	can_revoke = {
		always = no
	}
	on_granted = {
		clear_mages_organization_effect = yes
	}
	ai_will_do = {
		factor = 1
	}
}
estate_mages_kelmaxherho_favours = { #Zokka
	icon = privilege_wolf
	
	is_valid = { has_estate_privilege = estate_mages_kelmaxherho_favours }
	can_select = { has_estate_privilege = estate_mages_kelmaxherho_favours }
	can_revoke = { always = no }
	benefits = {
		mages_privilege_slots = 1
	}

	conditional_modifier = {
		trigger = { is_variable_equal = { which = kelmaxherho_favours_count value = 1 } }
		modifier = { num_accepted_cultures = 1 mages_loyalty_modifier = 0.025 mages_influence_modifier = 0.05 church_loyalty_modifier = -0.025 }
	}
	conditional_modifier = {
		trigger = { is_variable_equal = { which = kelmaxherho_favours_count value = 2 } }
		modifier = { num_accepted_cultures = 2 mages_loyalty_modifier = 0.05 mages_influence_modifier = 0.1 church_loyalty_modifier = -0.05 }
	}
	conditional_modifier = {
		trigger = { is_variable_equal = { which = kelmaxherho_favours_count value = 3 } }
		modifier = { num_accepted_cultures = 3 mages_loyalty_modifier = 0.075 mages_influence_modifier = 0.15 church_loyalty_modifier = -0.075 }
	}
	conditional_modifier = {
		trigger = { is_variable_equal = { which = kelmaxherho_favours_count value = 4 } }
		modifier = { num_accepted_cultures = 4 mages_loyalty_modifier = 0.1 mages_influence_modifier = 0.2 church_loyalty_modifier = -0.1 }
	}
	conditional_modifier = {
		trigger = { is_variable_equal = { which = kelmaxherho_favours_count value = 5 } }
		modifier = { num_accepted_cultures = 5 mages_loyalty_modifier = 0.125 mages_influence_modifier = 0.25 church_loyalty_modifier = -0.125 }
	}
	conditional_modifier = {
		trigger = { is_variable_equal = { which = kelmaxherho_favours_count value = 6 } }
		modifier = { num_accepted_cultures = 6 mages_loyalty_modifier = 0.15 mages_influence_modifier = 0.3 church_loyalty_modifier = -0.15 }
	}
	conditional_modifier = {
		trigger = { is_variable_equal = { which = kelmaxherho_favours_count value = 7 } }
		modifier = { num_accepted_cultures = 7 mages_loyalty_modifier = 0.175 mages_influence_modifier = 0.35 church_loyalty_modifier = -0.175 }
	}
	conditional_modifier = {
		trigger = { is_variable_equal = { which = kelmaxherho_favours_count value = 8 } }
		modifier = { num_accepted_cultures = 8 mages_loyalty_modifier = 0.2 mages_influence_modifier = 0.4 church_loyalty_modifier = -0.2 }
	}
	conditional_modifier = {
		trigger = { is_variable_equal = { which = kelmaxherho_favours_count value = 9 } }
		modifier = { num_accepted_cultures = 9 mages_loyalty_modifier = 0.225 mages_influence_modifier = 0.45 church_loyalty_modifier = -0.225 }
	}
	conditional_modifier = {
		trigger = { is_variable_equal = { which = kelmaxherho_favours_count value = 10 } }
		modifier = { num_accepted_cultures = 10 mages_loyalty_modifier = 0.25 mages_influence_modifier = 0.5 church_loyalty_modifier = -0.25 }
	}
	conditional_modifier = {
		trigger = { is_variable_equal = { which = kelmaxherho_favours_count value = 11 } }
		modifier = { num_accepted_cultures = 11 mages_loyalty_modifier = 0.275 mages_influence_modifier = 0.55 church_loyalty_modifier = -0.275 }
	}
	conditional_modifier = {
		trigger = { is_variable_equal = { which = kelmaxherho_favours_count value = 12 } }
		modifier = { num_accepted_cultures = 12 mages_loyalty_modifier = 0.3 mages_influence_modifier = 0.6 church_loyalty_modifier = -0.3 }
	}
	conditional_modifier = {
		trigger = { check_variable = { which = kelmaxherho_favours_count value = 13 } }
		modifier = { num_accepted_cultures = 13 mages_loyalty_modifier = 0.325 mages_influence_modifier = 0.65 church_loyalty_modifier = -0.325 }
	}

	ai_will_do = {
		factor = 1000
	}
}
estate_mages_moment_of_felflame = { #Zokka
	icon = privilege_cast_spell
	
	is_valid = { has_country_flag = zokka_words_flag }
	can_select = { NOT = { has_estate_privilege = estate_church_eternal_felflame } }
	can_revoke = { always = no }

	benefits = {
		mages_privilege_slots = 1
	}

	on_granted = {
		custom_tooltip = zokka_moment_felflame_tt
		if = {
			limit = { OR = { has_estate_privilege = estate_mages_moment_of_congruence has_estate_privilege = estate_mages_moment_of_edification } NOT = { has_country_flag = zokka_priv_favour_granted_flag } }
			set_country_flag = zokka_priv_favour_granted_flag
			add_kelmaxherho_favour = yes
		}
	}
	
	ai_will_do = {
		factor = 1000
	}
}
estate_mages_moment_of_congruence = { #Zokka
	icon = privilege_xhazobkult_candles
	
	is_valid = { has_country_flag = zokka_words_flag }
	can_select = { NOT = { has_estate_privilege = estate_church_eternal_congruence } }
	can_revoke = { always = no }

	benefits = {
		mages_privilege_slots = 1
	}
	
	on_granted = {
		custom_tooltip = zokka_moment_congruence_tt
		if = {
			limit = { OR = { has_estate_privilege = estate_mages_moment_of_felflame has_estate_privilege = estate_mages_moment_of_edification } NOT = { has_country_flag = zokka_priv_favour_granted_flag } }
			set_country_flag = zokka_priv_favour_granted_flag
			add_kelmaxherho_favour = yes
		}
		hidden_effect = {
			every_owned_province = {
				limit = { has_state_patriach = yes }
				add_base_tax = 1
				add_province_modifier = {
					name = zokka_congruence_moment
					duration = -1
				}
				set_province_flag = zokka_congruence_flag
			}
		}
	}
	
	ai_will_do = {
		factor = 1000
	}
}
estate_mages_moment_of_edification = { #Zokka
	icon = privilege_wolf
	
	is_valid = { has_country_flag = zokka_words_flag }
	can_select = { NOT = { has_estate_privilege = estate_church_eternal_edification } }
	can_revoke = { always = no }

	benefits = {
		mages_privilege_slots = 1
	}

	on_granted = {
		custom_tooltip = zokka_moment_edification_tt
		if = {
			limit = { OR = { has_estate_privilege = estate_mages_moment_of_congruence has_estate_privilege = estate_mages_moment_of_felflame } NOT = { has_country_flag = zokka_priv_favour_granted_flag } }
			set_country_flag = zokka_priv_favour_granted_flag
			add_kelmaxherho_favour = yes
		}
	}
	
	ai_will_do = {
		factor = 1000
	}
}

### Eduz-Vacyn
estate_mages_vacyntassi_order = { #Eduz-Vacyn
	icon = privilege_seek_support_of_clergy
	max_absolutism = 0
	loyalty = 0
	influence = 0.05
	is_valid = {
		has_estate_privilege = estate_mages_vacyntassi_order
	}
	can_revoke = {
		always = no
	}
	penalties = {
	}
	benefits = {
		development_cost = -0.1
	}

	ai_will_do = {
		factor = 10
	}
}
estate_mages_legacy_hakin = { #Eduz-Vacyn
	icon = privilege_missionary
	max_absolutism = 0
	loyalty = 5
	influence = 0
	is_valid = {
		has_estate_privilege = estate_mages_legacy_hakin
	}
	can_revoke = {
		always = no
	}
	penalties = {
	}
	benefits = {
		global_unrest = -2
		max_estate_spell_levels = 1
	}

	ai_will_do = {
		factor = 10
	}
}

######################################
### MTS WITH ONE NON-ORG PRIVILEGE ###
######################################

estate_mages_maidens_of_mists = { #Yinquan
	icon = privilege_demand_more_troops
	max_absolutism = -5
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 1 } }
	influence = 0.05
	land_share = 10
	is_valid = { has_country_flag = Y26_maidens_of_mists }
	can_select = {
		army_tradition = 15
		estate_influence = {
			estate = estate_mages
			influence = 30
		}
	}
	on_granted = {
		add_army_tradition = -15
		enable_estate_action = { estate_action = RECRUIT_WAR_WIZARD }
	}
	on_revoked = {
		disable_estate_action = { estate_action = RECRUIT_WAR_WIZARD }
	}
	on_invalid = {
		disable_estate_action = { estate_action = RECRUIT_WAR_WIZARD }
	}
	penalties = {
		army_tradition_decay = 0.01
	}
	benefits = {
		land_morale = 0.05
		movement_speed = 0.1
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 2
			personality = ai_militarist
		}
		modifier = {
			factor = 1.5
			is_at_war = yes
		}
		modifier = {
			factor = 0
			NOT = { army_tradition = 1 }	#if you have hella low army tradition, you're gonna want to turn this off
		}
	}
}

estate_mages_necromancer_death_tax = { #Esthil
	icon = privilege_give_money
	max_absolutism = -5
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 1 } }
	influence = -0.1
	loyalty = -0.05
	land_share = 0
	is_valid = {
		has_country_flag = esthil_unlocked_death_tax
	}
	can_select = {
		NOT = { has_estate_privilege = estate_mages_empowered_mages }
	}
	benefits = {
		global_tax_modifier = 0.1
	}
	ai_will_do = {
		factor = 5
		modifier = {
			factor = 2
			personality = ai_militarist
		}
		modifier = {
			factor = 1.5
			is_at_war = no
		}
	}
}

estate_mages_reeshi_bonds = { #Ghavaanaj
	icon = privilege_build_jain_temple
	max_absolutism = -5
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 1 } }
	loyalty = 0.05
	influence = 0.1
	land_share = 10
	is_valid = {
		culture = ghavaanaj
		has_country_flag = ghavaanaj_reeshi_bonds_flag
	}
	can_select = {
		culture = ghavaanaj
	}
	penalties = {
		cavalry_cost = 0.1
	}
	benefits = {
		land_morale = 0.05
		cavalry_flanking = 0.25
	}
	on_granted = {
		custom_tooltip = estate_mages_reeshi_bonds_tt
	}
	on_revoked = {
		custom_tooltip = estate_mages_reeshi_bonds_tt
	}
	ai_will_do = {
		factor = 0
	}
}

estate_mages_flamekeepers = { #Beikdugang
	icon = privilege_grant_new_world_charter
	max_absolutism = -5
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 1 } }
	loyalty = 0.05
	influence = 0.1
	land_share = 5
	is_valid = {
		OR = {
			mission_completed = Y15_northeast_passage
			overlord = { mission_completed = Y15_northeast_passage }
		}
	}
	can_select = {
		OR = {
			mission_completed = Y15_the_flamekeepers
			overlord = { mission_completed = Y15_the_flamekeepers }
		}
	}
	can_revoke = {
		always = yes
	}
	on_granted = {
		custom_tooltip = Y15_flamekeeper_granted
	}
	on_granted_province = {
		if = {
			limit = { has_climate = arctic }
			add_province_modifier = {
				name = Y15_flamekeeper_arctic
				duration = -1
			}
		}
		else_if = {
			limit = { has_province_modifier = Y15_flamekeeper_arctic }
			remove_province_modifier = Y15_flamekeeper_arctic
		}
	}
	on_revoked = {
		add_stability = -1
		custom_tooltip = Y15_flamekeeper_revoked
	}
	on_revoked_province = {
		if = {
			limit = { has_province_modifier = Y15_flamekeeper_arctic }
			remove_province_modifier = Y15_flamekeeper_arctic
		}
	}
	on_invalid = {
		custom_tooltip = Y15_flamekeeper_revoked
	}
	on_invalid_province = {
		if = {
			limit = { has_province_modifier = Y15_flamekeeper_arctic }
			remove_province_modifier = Y15_flamekeeper_arctic
		}
	}
	penalties = {
		global_tax_modifier = -0.15
	}
	benefits = {
		naval_attrition = -0.2
		trade_range_modifier = 0.25
	}
	conditional_modifier = {
		trigger = {
			estate_loyalty = { estate = estate_mages loyalty = 50 }
			estate_influence = { estate = estate_mages influence = 40 }
		}
		modifier = {
			naval_attrition = -0.2
			trade_range_modifier = 0.25
		}
	}
	ai_will_do = { factor = 20 }
}

estate_mages_vazhatun_study_runes = { #Dur-Vazhatun
	icon = privilege_commission_jain_scripture
	max_absolutism = -5
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 1 } }
	loyalty = 0.10
	influence = 0.15
	is_valid = {
		tag = I03
		mission_completed = vazhatun_secrets_applied
	}
	can_select = {
		tag = I03
		mission_completed = vazhatun_secrets_applied
	}
	on_granted = {
		if = {
			limit = { mission_completed = vazhatun_experts_of_magic }
			vazhatun_increase_observation_efficiency_massive = yes
		}
		else = {
			vazhatun_increase_observation_efficiency_large = yes
		}
	}
	on_revoked = {
		if = {
			limit = { mission_completed = vazhatun_experts_of_magic }
			vazhatun_decrease_observation_efficiency_massive = yes
		}
		else = {
			vazhatun_decrease_observation_efficiency_large = yes
		}
	}
	on_invalid = {
		if = {
			limit = { mission_completed = vazhatun_experts_of_magic }
			vazhatun_decrease_observation_efficiency_massive = yes
		}
		else = {
			vazhatun_decrease_observation_efficiency_large = yes
		}
	}
	penalties = {
		all_power_cost = 0.025
	}
	benefits = {
		technology_cost = -0.025
		idea_cost = -0.025
	}
	ai_will_do = { factor = 1 }
}

estate_mages_ninazir_connections = { #Zansap
	icon = privilege_cast_spell

	can_select = {
		always = no
	}
	is_valid = {
		has_estate_privilege = estate_mages_ninazir_connections
	}
	on_granted = {
	}
	penalties = {
	}

	benefits = {
		technology_cost = -0.05
		mages_monthly_experience = 0.5
	}
	cooldown_years = 10

	on_cooldown_expires = {
	}
	on_invalid = {
	}
	ai_will_do = {
		factor = 10 #ai will crash the game on linux. it uses a hidden decision in mages.txt to do this. Was fixed
	}
}

estate_mages_mage_fleet = { #Karshyr
	icon = privilege_grant_autonomy
	max_absolutism = 0
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 0 } }
	loyalty = 0
	influence = 0
	is_valid = { 
		has_estate_privilege = estate_mages_mage_fleet
	}
	can_revoke = {
		5834 = {
			has_building = mage_tower
		}
		num_of_owned_provinces_with = {
			value = 20
			has_port = yes
		}
		navy_size = 30
	}
	on_revoked = {
	}
	penalties = {
		naval_forcelimit_modifier = -0.25
	}
	benefits = {
		naval_morale = 0.1
	}
	ai_will_do = {
		factor = -300
	}
}

estate_mages_young_tower_of_magic = { #Shangra
	icon = privilege_grant_autonomy
	max_absolutism = 0
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 0 } }
	loyalty = 0
	influence = 0
	is_valid = { 
		has_estate_privilege = estate_mages_young_tower_of_magic
	}
	can_revoke = {
		num_of_owned_provinces_with = {
			value = 3
			has_building = mage_tower
		}
	}
	on_revoked = {
	}
	penalties = {
		all_power_cost = 0.05
	}
	benefits = {
		technology_cost = -0.05
	}
	ai_will_do = {
		factor = -300
	}
}

estate_mages_delta_orbs = { #Duwarkani
	icon = estate_eunuchs_royal_intrigue_keepers_privilege
	loyalty = 0
	influence = 0
	max_absolutism = -10
	conditional_modifier = { 
		trigger = { 
			has_absolutism_reduction_for_estate_privileges = yes 
			NOT = {	has_country_modifier = duwarkani_she_weeps_for_all }
		} 
		modifier = { max_absolutism = 2 }
	}
	land_share = 0

	is_valid = { has_estate_privilege = estate_mages_delta_orbs }
	can_select = { has_estate_privilege = estate_mages_delta_orbs }

	can_revoke = {
		always = no
	}

	benefits = {
		artillery_levels_available_vs_fort = 1
	}
	ai_will_do = { factor = 10 }

	conditional_modifier = {
		trigger = {
			high_tolerance_gnomish_race_trigger = yes
		}
		modifier = {
			backrow_artillery_damage = 0.2
		}
	}
	conditional_modifier = {
		trigger = {
			has_country_modifier = duwarkani_she_weeps_for_all
		}
		modifier = {
			max_absolutism = 10
		}
	}
}

estate_mages_collaborators = { #Maghargma
	icon = privilege_promote_maratha_nobility
	loyalty = 0.05
	influence = 0.1
	is_valid = { 
		OR = {
			tag = I90
			was_tag = I90
		}
		has_country_flag = I90_mages_collab_enabled
	}
	max_absolutism = 0
	benefits = {
	}
	mechanics = { exempt_from_seize_land }
}

estate_mages_the_clouded_eye = { #Clouded Eye
	icon = privilege_cast_spell
	loyalty = 0.1
	influence = 0.1

	is_valid = { has_estate_privilege = estate_mages_the_clouded_eye }
	can_revoke = { always = no }

	benefits = {
		all_power_cost = -0.025
	}

	ai_will_do = {
		factor = 10
	}
}

estate_mages_az_an_land_reallocation = { #Ovdal-Az-An
	icon = privilege_promote_maratha_nobility
	max_absolutism = 0
	loyalty = 0.05
	land_share = 5
	influence = 0.1
	is_valid = {
		tag = I19
		mission_completed = az_an_manipulators_of_magic
	}
	can_select = {
		tag = I19
	}
	can_revoke = {
		always = yes
	}
	on_granted = {
		custom_tooltip = az_an_land_reallocation_tt
	}
	penalties = {
	}
	benefits = {
		global_tax_modifier = 0.05
	}
	conditional_modifier = {
		trigger = {
			estate_influence = { estate = estate_mages influence = 30 }
		}
		modifier = {
			possible_adm_policy	= 1
		}
	}
	conditional_modifier = {
		trigger = {
			estate_influence = { estate = estate_mages influence = 50 }
		}
		modifier = {
			possible_dip_policy	= 1
		}
	}
	conditional_modifier = {
		trigger = {
			estate_influence = { estate = estate_mages influence = 70 }
		}
		modifier = {
			possible_mil_policy	= 1
		}
	}
	mechanics = {
		exempt_from_seize_land
		no_estate_crownland_loss_from_developing
	}
}

estate_mages_dune_magic_disruption = { #Binwarji
	icon = privilege_grant_autonomy
	max_absolutism = 0
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 0 } }
	loyalty = 0
	influence = 0
	is_valid = { 
		has_estate_privilege = estate_mages_dune_magic_disruption
	}
	can_select = {
	}
	on_granted = {
	}
	can_revoke = {
		5785 = {
			owned_by = root
			has_building = mage_tower
		}
	}
	on_revoked = {
		hidden_effect = {
			country_event = {
				id = binsplosion_events.25
				days = 3
			}
		}
	}
	modifier_by_land_ownership = {
	}
	penalties = {
		land_maintenance_modifier = 0.50
		global_monthly_devastation = 0.1
	}
	benefits = {
	}
	ai_will_do = {
		factor = 1
	}
}

estate_mages_fifth_family = { #Toarnaire
    icon = privilege_fifth_family
    loyalty = 0.05
    influence = 0.1
    can_select = {
        always = no
    }
    is_valid = {
        mission_completed = toarnaire_mageblood
    }
    on_granted = {
		custom_tooltip = toarnaire_fifth_tt
    }
	on_revoked = {
		custom_tooltip = toarnaire_fifth_tt
	}
    can_revoke = {
        always = no
    }
    penalties = {
    }
    benefits = {
    }
	ai_will_do = {
		factor = 5
	}
}

estate_mages_chaqway_flamingo = { #Chaqway
	icon = privilege_grant_autonomy
	max_absolutism = 0
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 0 } }
	loyalty = -0.05
	influence = 0.1
	is_valid = { 
		has_unlocked_estate_privilege = { estate_privilege = estate_mages_chaqway_flamingo }
	}
	on_granted = {
		custom_tooltip = chaqway_flamingo_tt
	}
	penalties = {
	}
	benefits = {
	}
	ai_will_do = {
		factor = 1
	}
}

estate_mages_free_alchemists = { #Unguldavor
	icon = privilege_cast_spell
	influence = 0.1

	is_valid = {
		has_estate_privilege = estate_mages_free_alchemists
	}
	can_revoke = { always = no }

	benefits = {
		global_tax_modifier = -0.05
		all_power_cost = -0.01
	}

	ai_will_do = {
		factor = 0
	}
}

estate_mages_prelude_to_greatness = { #Pashaine
	icon = privilege_grant_autonomy
	max_absolutism = 0
	loyalty = -0.3
	influence = 0.5
	is_valid = { 
		has_estate_privilege = estate_mages_prelude_to_greatness
	}
	can_revoke = { always = no }
	penalties = {
		all_power_cost = 0.05
		technology_cost = 0.15
	}
	benefits = {
	}
	mechanics = {
		exempt_from_seize_land
	}
}

sareyand_blazing_sun_academies = { #Sareyand
	icon = privilege_demand_more_troops
	influence = 0.1

	is_valid = {
		has_estate_privilege = sareyand_blazing_sun_academies
	}

	can_select = {
		always = yes
	}
	can_revoke = {
		always = no
	}

	influence_scaled_conditional_modifier = {
		trigger = {
			NOT = {
				estate_loyalty = {
					estate = estate_mages
					loyalty = 30
				}
			}
		}
		modifier = {
			land_maintenance_modifier = 0.30
			reinforce_speed = -0.15
		}
	}

	influence_scaled_conditional_modifier = {	#Modifier that are applied if the specified conditions are true. At 100% Influence you gain 100% of the modifier.
		trigger = {
			estate_loyalty = {
				estate = estate_mages
				loyalty = 30
			}
			NOT = {
				estate_loyalty = {
					estate = estate_mages
					loyalty = 60
				}
			}
		}
		modifier = {
			global_unrest = -1
			amount_of_samurai = 5
		}
	}
	influence_scaled_conditional_modifier = {	#Modifier that are applied if the specified conditions are true. At 100% Influence you gain 100% of the modifier.
		trigger = {
			estate_loyalty = {
				estate = estate_mages
				loyalty = 60
			}
		}
		modifier = {
			global_unrest = -3
			amount_of_samurai = 10
		}
	}

	on_granted = {
		custom_tooltip = tooltip_estate_mages_battlemage_academies
		enable_estate_action = { estate_action = RECRUIT_WAR_WIZARD }
	}

	on_revoked = {
		disable_estate_action = { estate_action = RECRUIT_WAR_WIZARD }
	}

	on_invalid = {
		disable_estate_action = { estate_action = RECRUIT_WAR_WIZARD }
	}

	ai_will_do = {
		factor = 6
	}	
}

estate_mages_train_rhaidd = { #Salla Elyn
	icon = privilege_demand_more_troops
	loyalty = 0.1
	influence = 0.1
	max_absolutism = -5

	can_select = {
		has_country_flag = I26_unlock_train_rhaidd_flag
	}
	is_valid = {
		has_country_flag = I26_unlock_train_rhaidd_flag
	}

	on_granted = {
		add_army_tradition = -15
		if = {
			limit = { has_estate_privilege = estate_nobles_noble_officer_right }
			remove_estate_privilege = estate_nobles_noble_officer_right
		}
	}
	benefits = {
		army_tradition = 0.5
		leader_land_shock = 1
		allowed_marine_fraction = 0.05
	}
	on_granted = {
		enable_estate_action = { estate_action = RECRUIT_RHAIDD }
	}
	on_revoked = {
		disable_estate_action = { estate_action = RECRUIT_RHAIDD }
	}
	on_invalid = {
		disable_estate_action = { estate_action = RECRUIT_RHAIDD }
	}

	ai_will_do = {
		factor = 0
	}
}

estate_mages_irrliam_sunblessed_exorcists = { #Irrliam
	icon = privilege_monopoly_of_goods_livestock
	max_absolutism = -5
	conditional_modifier = { trigger = { has_absolutism_reduction_for_estate_privileges = yes } modifier = { max_absolutism = 1 } }
	loyalty = 0.05
	is_valid = { has_country_flag = irriliam_gain_magi_privilege }
	on_granted = {
		add_country_modifier = {
			name = abjuration_spell_three_quarter
			duration = -1
		}
	}
	on_revoked = {
		remove_country_modifier = abjuration_spell_three_quarter
	}
	benefits = {
		land_morale = 0.05
		abjuration_experience_mod = 0.1
	}
	ai_will_do = {
		factor = 1
	}
}

estate_mages_black_herd_shockshroud_mages = { #Black Herd
	icon = privilege_cast_spell
	loyalty = 0.1
	influence = 0.1
	
	is_valid = { has_country_flag = enable_shockshroud_mages_flag }
	on_granted = { custom_tooltip = shockshroud_mages_effect_tt }

	ai_will_do = { factor = 1 }
}
