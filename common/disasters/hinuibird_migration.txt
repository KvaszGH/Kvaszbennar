# We want this on a 16 year cycle - after 12 years (144 months), the disaster starts, and goes on for 4 years. Repeat.
# While the disaster has started, it will tick up to 100% in 20 months, and will end after 48 months. To make it an even cycle, the
# disaster will appear, i.e, Potential is true, after 144-20=124 months=10 years 4 months
hinuibird_migration_disaster = {
	potential = {
		has_government_mechanic = charkuchin_kobold_citadel_supplies_mechanic
		REB = {
			OR = {
				had_country_flag = {
					flag = hinuibird_migration_end_flag
					days = 3771 # 10 years 4 months
				}
				has_country_flag = hinuibird_migration_start_flag
			}
		}
	}
	
	can_start = {
		always = yes
	}
	
	can_stop = {
		always = no
	}
	
	progress = {
		modifier = {
			factor = 5 # Warning pops up after 10 years 4 months, and it starts 20 months after that
			always = yes
		}
	}
	
	can_end = {
		custom_trigger_tooltip = {
			tooltip = hinuibird_countdown_tt
			REB = {
				OR = {
					had_country_flag = {
						flag = hinuibird_migration_start_flag
						days = 1460 # 4 years
					}
					has_country_flag = hinuibird_migration_end_flag
				}
			}
		}
	}

	ended_by_country_breaking_to_rebels = no	

	modifier = { }
	
	
	on_start = charkuchin_kobold.2
	on_end = charkuchin_kobold.6
	
	on_monthly = {
		events = {
			charkuchin_kobold.17 # Handler event for the bad ones. Will only occur every 12 months due to the hinuibird_disaster_event_wait modifier
			charkuchin_kobold.9 # check if you have all the provinces you need to stop the disaster permanently
		}
	}
}